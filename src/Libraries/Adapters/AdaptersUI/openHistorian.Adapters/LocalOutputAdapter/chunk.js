"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[121],{77121:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var l=a(6904),n=a(54840),i=a(2580),r=a(94194),s=a(24334);const o=e=>{const t=l.useRef((0,s.CreateGuid)()),[a,n]=l.useState(!1),o=l.useCallback((()=>{const t=[...e.DownSamplingIntervals,{StartDay:0,SamplesPerSec:0}];e.SetDownSamplingIntervals(t)}),[e.DownSamplingIntervals,e.SetDownSamplingIntervals]),c=l.useCallback(((t,a)=>{const l=[...e.DownSamplingIntervals];l[a]=t,e.SetDownSamplingIntervals(l)}),[e.DownSamplingIntervals,e.SetDownSamplingIntervals]),m=l.useCallback((t=>{const a=[...e.DownSamplingIntervals];a.splice(t,1),e.SetDownSamplingIntervals(a)}),[e.DownSamplingIntervals,e.SetDownSamplingIntervals]);return l.createElement(l.Fragment,null,l.createElement("label",{"data-help":t.current},"Down-sampling Intervals",l.createElement("button",{className:"btn mb-1 pt-0 pb-0",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1)},l.createElement(r.ReactIcons.QuestionMark,{Color:"var(--info)",Size:20})),0===e.DownSamplingIntervals.length?l.createElement("button",{className:"btn",onClick:()=>o()}," ",l.createElement(r.ReactIcons.CirclePlus,null)," "):null),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-12"},e.DownSamplingIntervals.map(((t,a)=>l.createElement(l.Fragment,{key:a},l.createElement("div",{className:"row align-items-center"},l.createElement("div",{className:"col"},l.createElement(i.Input,{Record:t,Field:"StartDay",Label:"Start Day",Type:"number",AllowNull:!1,Setter:e=>c(e,a),Valid:e=>t[e]>=0,Feedback:"Start Day must be greater than or equal to 0 and non-empty."})),l.createElement("div",{className:"col"},l.createElement(i.Input,{Record:t,Field:"SamplesPerSec",Label:"Samples Per Sec",Type:"number",AllowNull:!1,Setter:e=>c(e,a),Valid:e=>t[e]>=0,Feedback:"Samples Per Sec must be greater than or equal to 0 and non-empty."})),l.createElement("div",{className:"col-auto"},l.createElement("button",{className:"btn",onClick:()=>m(a)},l.createElement(r.ReactIcons.TrashCan,{Color:"red"}))),a===e.DownSamplingIntervals.length-1?l.createElement("div",{className:"col-auto"},l.createElement("button",{className:"btn",onClick:()=>o()}," ",l.createElement(r.ReactIcons.CirclePlus,null)," ")):null)))))))},c={InstanceName:{Value:"",Description:"Define the instance name for the historian. Leave this value blank to default to the adapter name."},DataChannel:{Value:{Port:38402,Interface:"::0"},Description:"Defines TCP server based connection string to use for the historian data channel.",Parse:e=>{var t,a;if(null==e)return{Port:38402,Interface:"::0"};const l=e.split(";").map((e=>e.trim())).filter((e=>e)),n={};return l.forEach((e=>{const[t,a]=e.split("=").map((e=>e.trim()));"port"===t.toLowerCase()?n.Port=Number(a):"interface"===t.toLowerCase()&&(n.Interface=a)})),{Port:null!==(t=n.Port)&&void 0!==t?t:38402,Interface:null!==(a=n.Interface)&&void 0!==a?a:"::0"}},Construct:e=>{var t,a;return`port=${null!==(t=e.Port)&&void 0!==t?t:""}; interface=${null!==(a=e.Interface)&&void 0!==a?a:""};`}},WorkingDirectory:{Value:"",Description:'Define the working directory used for working data and intermediate files and before moving data to its permanent location (see ArchiveDirectories). Leave blank to default to ".\\Archive\\".'},ArchiveDirectories:{Description:"Define the write directories for this historian instance. Leave empty to default to working directory.",Value:[],Parse:e=>null==e?[]:""===e?[""]:e.split(";"),Construct:e=>0===(null==e?void 0:e.length)?null:null==e?void 0:e.join(";")},DirectoryNamingMode:{Value:"YearMonth",Description:"Define the directory naming mode for archive directory files."},ArchiveCurtailmentInterval:{Value:86400,Description:"Define the default interval, in seconds, over which the archive curtailment will operate. Set to zero to disable."},WatchAttachedPaths:{Value:!1,Description:"Determines whether to set up file watchers to monitor the attached paths."},AttachedPaths:{Description:"Define the directories and/or individual files to attach to this historian instance.",Value:[],Parse:e=>null==e?[]:""===e?[""]:e.split(";"),Construct:e=>0===(null==e?void 0:e.length)?null:null==e?void 0:e.join(";")},TargetFileSize:{Value:2,Description:"Define desired target file size in GigaBytes."},DesiredRemainingSpace:{Value:100,Description:"Define desired remaining disk space in GigaBytes."},MaximumArchiveDays:{Value:0,Description:"Define the maximum number of days of data to maintain, i.e., any archives files with data older than current date minus value will be deleted daily. Defaults to zero meaning no maximum."},DownsamplingIntervals:{Value:[],Description:"Define the scheduled downsampling intervals for this archive. Format: any number of downsampling-start-days=samples-per-second separated by semi-colons, e.g., 180=10; 365=1; 650=0.1",Parse:e=>null==e?[]:e.split(";").map((e=>e.trim())).filter((e=>""!==e)).map((e=>{const[t,a]=e.split("=").map((e=>e.trim()));return{StartDay:Number(t),SamplesPerSec:Number(a)}})),Construct:e=>null==e||0===e.length?"":e.map((e=>`${e.StartDay}=${e.SamplesPerSec}`)).join("; ")},AutoRemoveOldestFilesBeforeFull:{Value:!0,Description:"Define the flag that determines if oldest archive files should be removed before running out of archive space."},EnableTimeReasonabilityCheck:{Value:!1,Description:"Define the flag that indicates if incoming timestamps to the historian should be validated for reasonability."},PastTimeReasonabilityLimit:{Value:43200,Description:"Define the maximum number of seconds that a past timestamp, as compared to local clock, will be considered valid."},FutureTimeReasonabilityLimit:{Value:43200,Description:"Define the maximum number of seconds that a future timestamp, as compared to local clock, will be considered valid."},SwingingDoorCompressionEnabled:{Value:!1,Description:"Define the flag that determines if swinging door compression is enabled for this historian instance."},InputMeasurementKeys:{Description:"Defines primary keys of input measurements the action adapter expects; can be one of a filter expression, measurement key, point tag or Guid.",Value:[],Parse:e=>null==e?[]:""===e?[""]:e.split(";"),Construct:e=>0===(null==e?void 0:e.length)?null:null==e?void 0:e.join(";")},OutputMeasurements:{Description:"Defines primary keys of output measurements the action adapter expects; can be one of a filter expression, measurement key, point tag or Guid.",Value:[],Parse:e=>null==e?[]:""===e?[""]:e.split(";"),Construct:e=>0===(null==e?void 0:e.length)?null:null==e?void 0:e.join(";")},RequeueOnException:{Value:!1,Description:"Defines whether or not to automatically place measurements back into the processing queue if an exception occurs while processing.  Defaults to false."},StagingCount:{Value:3},DiskFlushInterval:{Value:1e4},CacheFlushInterval:{Value:100}},m=[{Label:"Year\\Month",Value:"Year\\Month"},{Label:"None",Value:"None"},{Label:"Year",Value:"Year"},{Label:"YearMonth",Value:"YearMonth"}],u={Settings:e=>{const t=new n.ReadOnlyControllerFunctions(n.ControllerPaths.GetHistorianControllerPath(e.HomePath)),a=l.useMemo((()=>n.AdapterHelperFuncs.parseConnectionString(e.ConnectionString,c)),[e.ConnectionString]);n.AdapterHelperFuncs.useSetInitialConnectionString(e.ConnectionString,e.SetConnectionString,c,a),n.AdapterHelperFuncs.useSetDefaultSettings(c,e.SetDefaultSettings);const r=l.useCallback((t=>{const a=n.AdapterHelperFuncs.constructConnectionString(t,c);a!==e.ConnectionString&&e.SetConnectionString(a)}),[e.ConnectionString]);l.useEffect((()=>{const t=[];null!=a&&(null==a.DataChannel||n.AdapterHelperFuncs.isPortValid(a.DataChannel.Port)||t.push("Port must be positive and less than 65535."),null==a.DataChannel||n.AdapterHelperFuncs.isIPAddressValid(a.DataChannel.Interface)||t.push("Interface must be a valid IPv4/IPv6 address."),e.SetErrors(t))}),[null==a?void 0:a.DataChannel,e.SetErrors]);const s=l.useCallback((e=>{r(Object.assign(Object.assign({},a),{DownsamplingIntervals:e}))}),[a,r]);return l.createElement(l.Fragment,null,null!=a?l.createElement("div",{className:"container-fluid d-flex flex-column h-100 p-0"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-12"},l.createElement(i.SearchableSelect,{Record:a,Setter:r,Search:e=>n.AdapterHelperFuncs.handleHistorianAcronymSearch(e,t),Field:"InstanceName",Label:"Historian Instance Name",AllowCustom:!1,Style:{width:"100%"},BtnStyle:{display:"flex",paddingLeft:0,alignItems:"center"},Help:c.InstanceName.Description}))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-6"},l.createElement(i.Input,{Record:a.DataChannel,Type:"number",AllowNull:!1,Field:"Port",Valid:e=>n.AdapterHelperFuncs.isPortValid(a.DataChannel[e]),Setter:e=>r(Object.assign(Object.assign({},a),{DataChannel:Object.assign(Object.assign({},e),{Port:e.Port})})),Label:"Port",Feedback:"Port must be positive and less than 65535.",Help:"Defines TCP port to use for the historian data channel."})),l.createElement("div",{className:"col-6"},l.createElement(i.Input,{Record:a.DataChannel,Type:"text",AllowNull:!1,Field:"Interface",Valid:e=>n.AdapterHelperFuncs.isIPAddressValid(a.DataChannel[e]),Setter:e=>r(Object.assign(Object.assign({},a),{DataChannel:Object.assign(Object.assign({},e),{Interface:e.Interface})})),Label:"Interface",Feedback:"Interface must be a valid IPv4/IPv6 address.",Help:"Defines TCP interface to use for the historian data channel."}))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-12"},l.createElement(i.Input,{Record:a,Type:"text",AllowNull:!1,Field:"WorkingDirectory",Valid:e=>!0,Setter:r,Help:c.WorkingDirectory.Description,Label:"Working Directory"}))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-12"},l.createElement(i.MultiInput,{Record:a,Type:"text",Field:"ArchiveDirectories",Label:"Archive Directories",Valid:()=>!0,Setter:r,Help:c.ArchiveDirectories.Description,DefaultValue:"./",AllowNull:!1}))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-12"},l.createElement(i.Select,{Record:a,Field:"DirectoryNamingMode",Label:"Directory Naming Mode",Setter:r,Help:c.DirectoryNamingMode.Description,Options:m}))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-6"},l.createElement(i.Input,{Record:a,Type:"number",AllowNull:!1,Field:"ArchiveCurtailmentInterval",Valid:e=>!0,Setter:r,Help:c.ArchiveCurtailmentInterval.Description,Label:"Archive Curtailment Timer (s)"})),l.createElement("div",{className:"col-6"},l.createElement(i.Input,{Record:a,Type:"number",AllowNull:!1,Field:"MaximumArchiveDays",Valid:e=>!0,Setter:r,Help:c.MaximumArchiveDays.Description,Label:"Max Archive Days"}))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-12"},l.createElement(i.ToggleSwitch,{Record:a,Field:"WatchAttachedPaths",Label:"Watch Attached Paths",Setter:r,Help:c.ArchiveCurtailmentInterval.Description}))),a.WatchAttachedPaths?l.createElement("div",{className:"row"},l.createElement("div",{className:"col-12"},l.createElement(i.MultiInput,{Record:a,Type:"text",Field:"AttachedPaths",Label:"Attached Paths",Valid:()=>!0,Setter:r,Help:c.AttachedPaths.Description,DefaultValue:"./",AllowNull:!1}))):null,l.createElement("div",{className:"row"},l.createElement("div",{className:"col-6"},l.createElement(i.Input,{Record:a,Type:"number",AllowNull:!1,Field:"TargetFileSize",Valid:e=>!0,Setter:r,Help:c.TargetFileSize.Description,Label:"Target File Size (GB)"})),l.createElement("div",{className:"col-6"},l.createElement(i.Input,{Record:a,Type:"number",AllowNull:!1,Field:"DesiredRemainingSpace",Valid:e=>!0,Setter:r,Help:c.DesiredRemainingSpace.Description,Label:"Desired Remaining Space (GB)"}))),l.createElement("div",{className:"row mt-1 mb-1"},l.createElement("div",{className:"col-12 "},l.createElement(o,{DownSamplingIntervals:a.DownsamplingIntervals,SetDownSamplingIntervals:s,HelpMessage:c.DownsamplingIntervals.Description}))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-12"},l.createElement(i.ToggleSwitch,{Record:a,Field:"AutoRemoveOldestFilesBeforeFull",Label:"Auto-remove Oldest Archives",Setter:r,Help:c.AutoRemoveOldestFilesBeforeFull.Description}))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-12"},l.createElement(i.ToggleSwitch,{Record:a,Field:"EnableTimeReasonabilityCheck",Label:"Enable Time Reasonability Check",Setter:r,Help:c.EnableTimeReasonabilityCheck.Description}))),a.EnableTimeReasonabilityCheck?l.createElement("div",{className:"row"},l.createElement("div",{className:"col-6"},l.createElement(i.Input,{Record:a,Type:"number",AllowNull:!1,Field:"PastTimeReasonabilityLimit",Valid:e=>!0,Setter:r,Help:c.PastTimeReasonabilityLimit.Description,Label:"Past Limit (s)"})),l.createElement("div",{className:"col-6"},l.createElement(i.Input,{Record:a,Type:"number",AllowNull:!1,Field:"FutureTimeReasonabilityLimit",Valid:e=>!0,Setter:r,Help:c.FutureTimeReasonabilityLimit.Description,Label:"Future Limit (s)"}))):null,l.createElement("div",{className:"row"},l.createElement("div",{className:"col-12"},l.createElement(i.ToggleSwitch,{Record:a,Field:"SwingingDoorCompressionEnabled",Label:"Swinging Door Compression Enabled",Setter:r,Help:c.SwingingDoorCompressionEnabled.Description}))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-12"},l.createElement(i.Input,{Record:a,Type:"number",AllowNull:!1,Field:"StagingCount",Valid:e=>!0,Setter:r,Label:"Staging Count"}))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-12"},l.createElement(i.Input,{Record:a,Type:"number",AllowNull:!1,Field:"DiskFlushInterval",Valid:e=>!0,Setter:r,Label:"Disk Flush Interval (ms)"}))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-12"},l.createElement(i.Input,{Record:a,Type:"number",AllowNull:!1,Field:"CacheFlushInterval",Valid:e=>!0,Setter:r,Label:"Cache Flush Interval (ms)"})))):null)},Input:null}}}]);