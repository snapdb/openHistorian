"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[55],{59055:(e,a,t)=>{t.r(a),t.d(a,{default:()=>i});var r=t(6904),n=t(54840),l=t(2580),s=t(94194);const m=e=>{var a,t;const m=r.useCallback((a=>{let t=e.Measurements.filter((e=>e!==a));e.SetMeasurements(t)}),[e.Measurements,e.Measurements]),u=r.useCallback(((a,t)=>{if(-1===t)return void e.SetMeasurements([...e.Measurements,a]);const r=[...e.Measurements];r[t]=a,e.SetMeasurements(r)}),[e.Measurements,e.SetMeasurements]);return r.createElement(r.Fragment,null,r.createElement("fieldset",{className:"border",style:{padding:"10px"}},r.createElement("legend",{className:"w-auto pr-2",style:{fontSize:"large"}},e.Title),r.createElement("div",{className:"row m-0"},r.createElement("div",{className:"col-12"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-12"},r.createElement(l.SearchableSelect,{Search:a=>((e,a,t)=>{const r=new n.GrafanaQueryFunctions(`${a}api/grafana`);let l=[];const s=`SELECT MagnitudePointTag, AnglePointTag FROM PhasorValues WHERE MagnitudePointTag LIKE '%${e}%' OR AnglePointTag LIKE '%${e}%' AND Type='${t?"I":"V"}'`,m={Label:"Add Filter",Value:"FILTER ALL PhasorValues WHERE PhasorType = 'V'"},u={dataTypeIndex:n.Grafana.DataTypeIndex.Measurement,expression:s};return r.Search(u).then((e=>(l.push(m),e.forEach((e=>{const[a,t]=e.split(",");l.push({Label:a,Value:a}),l.push({Label:t,Value:t})})),l)))})(a,e.HomePath,e.IsCurrent),Record:0===e.Measurements.length?{Measurement:""}:{Measurement:e.Measurements[e.Measurements.length-1]},Field:"Measurement",Setter:e=>u(e.Measurement,-1),Style:{width:"100%"},BtnStyle:{display:"flex",paddingLeft:0,alignItems:"center"},AllowCustom:!1,Label:"",ResetSearchOnSelect:!0}))),r.createElement("div",{className:"row"},null===(a=e.Measurements)||void 0===a?void 0:a.filter((e=>!e.includes("FILTER"))).map(((e,a)=>r.createElement("div",{className:"col-auto",key:a},r.createElement("div",{className:"badge badge-pill badge-dark m-2 d-flex align-items-center"},r.createElement("span",{className:"text-truncate",style:{minWidth:0}},e),r.createElement("button",{className:"btn",onClick:()=>m(e)},r.createElement(s.ReactIcons.TrashCan,{Color:"red"}))))))),e.Measurements.some((e=>e.includes("FILTER")))?r.createElement("hr",{style:{borderTop:"1px solid var(--secondary)"}}):null,null===(t=e.Measurements)||void 0===t?void 0:t.filter((e=>e.includes("FILTER"))).map(((a,t)=>r.createElement(r.Fragment,null,r.createElement(n.PointTagFilter,{GrafanaDataTypeIndex:n.Grafana.DataTypeIndex.Phasor,key:t,HomePath:e.HomePath,OutputMeasurement:a,SetOutputMeasurement:e=>u(e,t),DeleteOutputMeasurement:m}),r.createElement("hr",null))))))))},u=e=>{if(null!=e&&0!==String(e).trim().length)return e},o=e=>{var a,t;const[s,o]=r.useState(!0);r.useEffect((()=>{const a=e.Params.find((e=>"Voltages"===e.Name)),t=(()=>{var e;const t=null!==(e=null==a?void 0:a.Value)&&void 0!==e?e:"";return null==t||""===t?[]:t.split(";").map((e=>e.trim()))})();0===(null==t?void 0:t.length)?o(!0):o(!1)}),[e.Params]);const i=r.useCallback((a=>{if(o(a.AutoMapVoltages),a.AutoMapVoltages){const a=e.Params.map((e=>"Voltages"===e.Name?Object.assign(Object.assign({},e),{Value:""}):e));e.SetParams(a)}}),[e.Params,e.SetParams]);if("InputMeasurementKeys"===e.Param.Name||"OutputMeasurements"===e.Param.Name){const a=(()=>{const a=e.Param.Value;return null==a||""===a?[]:a.split(";").map((e=>e.trim()))})(),t=a=>{const t=0===a.length?"":a.join(";");e.SetParam(Object.assign(Object.assign({},e.Param),{Value:t}))};return"InputMeasurementKeys"===e.Param.Name?r.createElement(n.MeasurementSelector,{Measurements:a,SetMeasurements:t,HomePath:homePath,Title:"Input Measurement Selector",DataTypeIndex:n.Grafana.DataTypeIndex.Measurement}):r.createElement(n.MeasurementSelector,{Measurements:a,SetMeasurements:t,HomePath:homePath,Title:"Output Measurement Selector",DataTypeIndex:n.Grafana.DataTypeIndex.Measurement})}if("Currents"===e.Param.Name||"Voltages"===e.Param.Name){const a=(()=>{const a=e.Param.Value;return null==a||""===a?[]:a.split(";").map((e=>e.trim()))})(),t=a=>{const t=0===a.length?"":a.join(";");e.SetParam(Object.assign(Object.assign({},e.Param),{Value:t}))};return"Currents"===e.Param.Name?r.createElement(r.Fragment,null,r.createElement(l.ToggleSwitch,{Record:{AutoMapVoltages:s},Field:"AutoMapVoltages",Setter:i,Label:"Auto Map Voltages",Help:"Flag to enable system to use Primary or Secondary Voltage associated of the Current Phasor."}),r.createElement(m,{Measurements:a,SetMeasurements:t,HomePath:homePath,Title:"Currents",IsCurrent:!0})):r.createElement(m,{Measurements:a,SetMeasurements:t,HomePath:homePath,Title:"Voltages",IsCurrent:!1})}if(e.Param.DataType>=1&&e.Param.DataType<=8)return r.createElement(l.Input,{Record:e.Param,Field:"Value",Type:"number",Label:e.Param.Label,Valid:a=>null!=e.Param[a],Setter:e.SetParam,Help:u(e.Param.Description),Disabled:e.IsReview});if(e.Param.DataType===n.Common.PhasorProtocolDataType.String)return r.createElement(l.Input,{Record:e.Param,Field:"Value",Label:e.Param.Label,Valid:a=>null!=e.Param[a],Setter:e.SetParam,Help:u(e.Param.Description),Disabled:e.IsReview});if(e.Param.DataType===n.Common.PhasorProtocolDataType.Boolean){const n=Object.assign(Object.assign({},e.Param),{Value:"true"===(null===(t=null===(a=e.Param)||void 0===a?void 0:a.Value)||void 0===t?void 0:t.toLowerCase())});return r.createElement(l.ToggleSwitch,{Record:n,Field:"Value",Label:e.Param.Label,Setter:e.SetParam,Help:u(e.Param.Description),Disabled:e.IsReview})}return e.Param.DataType===n.Common.PhasorProtocolDataType.Enum?r.createElement(l.Select,{Record:e.Param,Field:"Value",Label:e.Param.Label,Options:e.Param.AvailableValues.map((e=>({Label:e,Value:e}))),Setter:e.SetParam,Help:u(e.Param.Description),Disabled:e.IsReview}):e.Param.DataType===n.Common.PhasorProtocolDataType.DateTime?r.createElement(l.TimePicker,{Record:e.Param,Field:"Value",Setter:e.SetParam,Valid:()=>!0,Label:e.Param.Label,Help:u(e.Param.Description),Disabled:e.IsReview}):null},i={Settings:e=>r.createElement(n.DefaultAdapterSettings,Object.assign({},e,{CustomConParamComponent:o})),Input:null,Output:null}}}]);