"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[363],{93107:function(e,t,n){var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},o.apply(this,arguments)},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(e){a={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var o,a=0,i=t.length;a<i;a++)!o&&a in t||(o||(o=Array.prototype.slice.call(t,0,a)),o[a]=t[a]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var r=n(6904),l=n(84917),s=n(18718);t.default=function(e){var t=r.useContext(l.GraphContext),n=a(r.useState([]),2),c=n[0],u=n[1],f=void 0!==e.useSingleAggregation&&e.useSingleAggregation;return r.useEffect((function(){u(function(n){for(var r=n.map((function(e){return o({},e)})),l=[],s={YInverseTransformation:t.YInverseTransformation,XInverseTransformation:t.XInverseTransformation,YTransformation:t.YTransformation,XTransformation:t.XTransformation},c=function(t){for(var n=l.findIndex((function(e){return e.Indices.includes(t)})),o=function(o){var c;if(!e.canAggregate(r[t],r[o],s))return"continue";var u=l.findIndex((function(e){return e.Indices.includes(o)}));return n<0&&u<0?(l.push({Indices:[t,o],Aggregate:null}),n=l.length-1,"continue"):n===u?"continue":(n>=0&&u<0&&l[n].Indices.push(o),n<0&&u>=0?(l[u].Indices.push(t),n=l.length-1,"continue"):void(n>=0&&u>=0&&((c=l[n].Indices).push.apply(c,i([],a(l[u].Indices),!1)),l.splice(u,1),n=l.findIndex((function(e){return e.Indices.includes(t)})))))},c=t+1;c<r.length;c+=1)o(c)},u=0;u<r.length;u+=1)c(u);var d=l.length,h=l.reduce((function(e,t){return e+t.Indices.length}),0);if(l.forEach((function(t){t.Aggregate=e.onAggregation(r.filter((function(e,n){return t.Indices.includes(n)})),s)})),!f&&d>0){var m=function(){d=l.length,h=l.reduce((function(e,t){return e+t.Indices.length}),0);for(var t=[],n=function(n){for(var o=n,c=function(c){var u;return e.canAggregate(l[n].Aggregate,l[c].Aggregate,s)?(t.push(n),(u=l[c].Indices).push.apply(u,i([],a(l[n].Indices),!1)),l[c].Aggregate=e.onAggregation(r.filter((function(e,t){return l[c].Indices.includes(t)})),s),o=c,"break"):"continue"},u=n+1;u<l.length&&"break"!==c(u);u+=1);var f=function(t){return l.findIndex((function(e){return e.Indices.includes(t)}))>-1?"continue":e.canAggregate(l[o].Aggregate,r[t],s)?(l[o].Indices.push(t),void(l[o].Aggregate=e.onAggregation(r.filter((function(e,t){return l[o].Indices.includes(t)})),s))):"continue"};for(u=0;u<r.length;u+=1)f(u)},o=0;o<l.length;o+=1)n(o);l=l.filter((function(e,n){return!t.includes(n)}))};do{m()}while(d!==l.length||h!==l.reduce((function(e,t){return e+t.Indices.length}),0))}return i(i([],a(r.filter((function(e,t){return-1===l.findIndex((function(e){return e.Indices.includes(t)}))}))),!1),a(l.map((function(e){return e.Aggregate}))),!1)}(e.data))}),[e.data,t.UpdateFlag]),r.createElement("g",null,c.map((function(e,n){return r.createElement(s.ContextlessCircle,{key:n.toString()+(void 0===e.text?"":e.text),circleProps:e,context:t})})))}},84998:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var o=n(6904);t.default=function(e){return o.createElement(o.Fragment,null,e.children)}},18718:function(e,t,n){var o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(e){a={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.ContextlessCircle=l;var a=n(24334),i=n(6904),r=n(84917);function l(e){var t=o(i.useState(""),2),n=t[0],l=t[1],s=o(i.useState(1),2),c=s[0],u=s[1];function f(t,n){if(void 0!==e.circleProps.onClick){var o=r.AxisMap.get(e.circleProps.axis),a=e.context.XTransformation(t),i=e.context.YTransformation(n,o),l=e.context.XTransformation(e.circleProps.data[0]),s=e.context.YTransformation(e.circleProps.data[1],o);a<=l+e.circleProps.radius&&a>=l-e.circleProps.radius&&i<=s+e.circleProps.radius&&i>=s-e.circleProps.radius&&e.circleProps.onClick({setYDomain:e.context.SetYDomain,setTDomain:e.context.SetXDomain})}}return i.useEffect((function(){""!==n&&e.context.UpdateData(n,{axis:e.circleProps.axis,legend:void 0,getMax:function(t){return t[0]<e.circleProps.data[0]&&t[1]>e.circleProps.data[0]?e.circleProps.data[1]:void 0},getMin:function(t){return t[0]<e.circleProps.data[0]&&t[1]>e.circleProps.data[0]?e.circleProps.data[1]:void 0}})}),[e.circleProps]),i.useEffect((function(){var t=e.context.AddData({axis:e.circleProps.axis,legend:void 0,getMax:function(t){return t[0]<e.circleProps.data[0]&&t[1]>e.circleProps.data[0]?e.circleProps.data[1]:void 0},getMin:function(t){return t[0]<e.circleProps.data[0]&&t[1]>e.circleProps.data[0]?e.circleProps.data[1]:void 0}});return l(t),function(){e.context.RemoveData(t)}}),[]),i.useEffect((function(){if(void 0!==e.circleProps.text){for(var t=5,n=(0,a.GetTextWidth)("Segoe UI",t+"em",e.circleProps.text),o=(0,a.GetTextHeight)("Segoe UI",t+"em",e.circleProps.text);(n>2*e.circleProps.radius||o>2*e.circleProps.radius)&&t>.05;)t-=.01,n=(0,a.GetTextWidth)("Segoe UI",t+"em",e.circleProps.text),o=(0,a.GetTextHeight)("Segoe UI",t+"em",e.circleProps.text);u(t)}}),[e.circleProps.text,e.circleProps.radius]),i.useEffect((function(){""!==n&&void 0!==e.circleProps.onClick&&e.context.UpdateSelect(n,{onClick:f})}),[e.circleProps.onClick,e.context.UpdateFlag]),isFinite(e.context.XTransformation(e.circleProps.data[0]))&&isFinite(e.context.YTransformation(e.circleProps.data[1],r.AxisMap.get(e.circleProps.axis)))?i.createElement("g",null,i.createElement("circle",{r:e.circleProps.radius,cx:e.context.XTransformation(e.circleProps.data[0]),cy:e.context.YTransformation(e.circleProps.data[1],r.AxisMap.get(e.circleProps.axis)),fill:e.circleProps.color,opacity:e.circleProps.opacity,stroke:e.circleProps.borderColor,strokeWidth:e.circleProps.borderThickness}),void 0!==e.circleProps.text?i.createElement("text",{fill:"currentColor",style:{fontSize:c+"em",textAnchor:"middle",dominantBaseline:"middle"},y:e.context.YTransformation(e.circleProps.data[1],r.AxisMap.get(e.circleProps.axis)),x:e.context.XTransformation(e.circleProps.data[0])},e.circleProps.text):null):null}t.default=function(e){var t=i.useContext(r.GraphContext);return i.createElement(l,{circleProps:e,context:t})}},84917:function(e,t,n){var o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(e){a={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var o,a=0,i=t.length;a<i;a++)!o&&a in t||(o||(o=Array.prototype.slice.call(t,0,a)),o[a]=t[a]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ContextWrapper=t.AxisMap=t.LineMap=t.GraphContext=void 0;var i=n(6904);t.GraphContext=i.createContext({XDomain:[0,0],XHover:NaN,XHoverSnap:NaN,YHover:[NaN,NaN],YHoverSnap:[NaN,NaN],YDomain:[[0,0]],CurrentMode:"select",MassEnableCommand:{requester:"",command:"none"},Data:i.createRef(),DataGuid:"",XApplyPixelOffset:function(e){return e},YApplyPixelOffset:function(e){return e},XTransformation:function(e){return 0},YTransformation:function(e,t){return 0},XInverseTransformation:function(e){return 0},YInverseTransformation:function(e,t){return 0},AddData:function(e){return""},RemoveData:function(e){},UpdateData:function(e){},SetLegend:function(e){},RegisterSelect:function(e){return""},RemoveSelect:function(e){},UpdateSelect:function(e){},SetXDomain:function(e){},SetYDomain:function(e){},UpdateFlag:0}),t.LineMap=new Map([["-","none"],["solid","none"],[":","10,5"],["short-dash","10,5"],["dash","20,5"],["long-dash","30,5"]]);t.AxisMap=new function(e,t){var n=this;this.get=function(e){var t;return null!==(t=n.mapBase.get(e))&&void 0!==t?t:n.undefinedOverride},this.values=function(){return n.mapBase.values()},this.keys=function(){return n.mapBase.keys()},this.mapBase=new Map(e),this.undefinedOverride=t,this.size=this.mapBase.size}([["left",0],["right",1]],0),t.ContextWrapper=function(e){var n=i.useMemo((function(){return{XDomain:e.XDomain,XHover:e.MouseIn?e.XInvTransform(e.MousePosition[0]):NaN,YHover:e.MouseIn?a([],o(t.AxisMap.values()),!1).map((function(t){return e.YInvTransform(e.MousePosition[1],t)})):Array(t.AxisMap.size).fill(NaN),XHoverSnap:e.MouseIn?e.XInvTransform(e.MousePositionSnap[0]):NaN,YHoverSnap:e.MouseIn?a([],o(t.AxisMap.values()),!1).map((function(t){return e.YInvTransform(e.MousePositionSnap[1],t)})):Array(t.AxisMap.size).fill(NaN),YDomain:e.YDomain,CurrentMode:e.CurrentMode,Data:e.Data,MassEnableCommand:e.MassEnableCommand,DataGuid:e.DataGuid,XApplyPixelOffset:e.XApplyPixelOffset,YApplyPixelOffset:e.YApplyPixelOffset,XTransformation:e.XTransform,YTransformation:e.YTransform,XInverseTransformation:e.XInvTransform,YInverseTransformation:e.YInvTransform,AddData:e.AddData,RemoveData:e.RemoveData,UpdateData:e.UpdateData,SetLegend:e.SetLegend,RegisterSelect:e.RegisterSelect,RemoveSelect:e.RemoveSelect,UpdateSelect:e.UpdateSelect,UpdateFlag:e.UpdateFlag,SetXDomain:e.SetXDomain,SetYDomain:e.SetYDomain}}),[e.XDomain,e.MousePosition,e.MousePositionSnap,e.YDomain,e.CurrentMode,e.MouseIn,e.UpdateFlag,e.DataGuid,e.XApplyPixelOffset,e.YApplyPixelOffset,e.XTransform,e.XInvTransform,e.YInvTransform,e.YTransform,e.SetXDomain,e.SetYDomain,e.AddData,e.RemoveData,e.UpdateData,e.SetLegend,e.RegisterSelect,e.RemoveSelect,e.UpdateSelect]);return i.createElement(t.GraphContext.Provider,{value:n},e.children)}},74929:function(e,t,n){var o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(e){a={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(t,"__esModule",{value:!0});var a=n(6904),i=n(74016),r={fill:"none",userSelect:"none",WebkitTouchCallout:"none",WebkitUserSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",pointerEvents:"none"},l={fontSize:"1em",textAnchor:"middle",dominantBaseline:"hanging",transition:"x 0.5s, y 0.5s"};t.default=function(e){var t=o(a.useState(1),2),n=t[0],s=t[1],c=a.useContext(i.LegendContext),u=c.LgHeight,f=c.LgWidth;return a.useEffect((function(){var t=e.maxValue-e.minValue;0===t&&(t=Math.abs(e.minValue)),t>=15&&s(0),t<15&&t>=1.5&&s(1),t<1.5&&t>=.15&&s(2),t<.15&&s(3),t<.015&&s(4),t<.0015&&s(5),0===t&&s(2)}),[e.maxValue,e.minValue]),a.createElement("div",{style:{height:u,width:f}},a.createElement("div",{style:{width:"100%",display:"flex",alignItems:"center",marginRight:"5px",height:"100%"}},a.createElement("svg",{style:r,viewBox:"0 0 ".concat(f," ").concat(u)},a.createElement("linearGradient",{id:e.id,x1:"0",x2:"".concat(f<u?0:1),y1:"0",y2:"".concat(f<u?1:0)},a.createElement("stop",{offset:"5%",stopColor:e.minColor}),a.createElement("stop",{offset:"95%",stopColor:e.maxColor})),a.createElement("path",{stroke:"currentColor",fill:"url(#".concat(e.id,")"),style:{strokeWidth:1,transition:"d 0.5s"},d:f<u?"M ".concat(.05*f," ").concat(.1*u," H ").concat(.5*f," V ").concat(.9*u," H ").concat(.05*f," V ").concat(.1*u):"M ".concat(.1*f," ").concat(.05*u," H ").concat(.9*f," V ").concat(.5*u," H ").concat(.1*f," V ").concat(.05*u)}),a.createElement("text",{fill:"currentColor",style:l,x:f*(f<u?.5:.1),y:u*(f<u?.1:.5),transform:"rotate(".concat(f<u?270:0,",").concat(f*(f<u?.5:.1),",").concat(u*(f<u?.1:.5),")")},"".concat(e.minValue.toFixed(n)).concat(void 0!==e.unitLabel?"".concat(e.unitLabel):"")),a.createElement("text",{fill:"currentColor",style:l,x:f*(f<u?.5:.9),y:u*(f<u?.9:.5),transform:"rotate(".concat(f<u?270:0,",").concat(f*(f<u?.5:.9),",").concat(u*(f<u?.9:.5),")")},"".concat(e.maxValue.toFixed(n)).concat(void 0!==e.unitLabel?"".concat(e.unitLabel):"")))))}},31594:function(e,t,n){var o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(e){a={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(t,"__esModule",{value:!0});var a=n(6904),i=n(24334),r=n(84917),l=n(70894),s=n(74929);t.default=function(e){var t=o(a.useState(""),2),n=t[0],c=t[1],u=o(a.useState(null),2),f=u[0],d=u[1],h=o(a.useState(0),2),m=h[0],p=h[1],v=a.useContext(r.GraphContext),g=a.useMemo((function(){return v.YTransformation(v.YDomain[r.AxisMap.get(e.axis)][0],r.AxisMap.get(e.axis))}),[v.YTransformation,v.YDomain,e.axis]),y=a.useMemo((function(){return null==f?[0,1]:f.GetLimits(v.XDomain[0],v.XDomain[1],1)}),[f,v.XDomain]),x=function(){switch(e.barAlign){case"left":return 0;case"center":return.5*m;case"right":return m}return 0}();a.useEffect((function(){null!=f&&""!==n&&(void 0===e.sampleMs?p((v.XTransformation(f.maxT)-v.XTransformation(f.minT))/f.GetFullData().length):p(v.XTransformation(f.minT+e.sampleMs)-v.XTransformation(f.minT)))}),[f,v.XTransformation,e.sampleMs]);var M=a.useCallback((function(){return a.createElement(s.default,{id:n,unitLabel:e.legendUnit,enabled:!0,minColor:(0,i.HsvToHex)(e.hue,e.saturation,1),maxColor:(0,i.HsvToHex)(e.hue,e.saturation,0),minValue:y[0],maxValue:y[1]})}),[e.legendUnit,y,e.hue,e.saturation,n]);return a.useEffect((function(){d(new l.PointNode(e.data))}),[e.data]),a.useEffect((function(){""!==n&&v.UpdateData(n,{axis:e.axis,legend:M(),enabled:!0,getMax:function(e){return null==f?-1/0:f.GetLimits(e[0],e[1],0)[1]},getMin:function(e){return null==f?1/0:f.GetLimits(e[0],e[1],0)[0]}})}),[e,f,M]),a.useEffect((function(){var t=v.AddData({axis:e.axis,legend:M(),enabled:!1,getMax:function(e){return null==f?-1/0:f.GetLimits(e[0],e[1],0)[1]},getMin:function(e){return null==f?1/0:f.GetLimits(e[0],e[1],0)[0]}});return c(t),function(){v.RemoveData(t)}}),[]),a.createElement("g",null,null==f?null:f.GetFullData().map((function(t,n){var o,l=v.YTransformation(t[1]+(null!==(o=e.binSize)&&void 0!==o?o:0),r.AxisMap.get(e.axis)),s=1-(t[2]-y[0])/(y[1]-y[0]),c=(0,i.HsvToHex)(e.hue,e.saturation,s);return a.createElement("rect",{key:n,x:v.XTransformation(t[0])-x,y:l,width:m,height:Math.abs(l-(void 0!==e.binSize?v.YTransformation(t[1],r.AxisMap.get(e.axis)):g)),fill:c,stroke:c})})))}},30371:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var o=n(6904),a=n(84917);t.default=function(e){var t,n,i,r=o.useContext(a.GraphContext),l=a.AxisMap.get(e.Axis),s=null!==(t=e.StartY)&&void 0!==t?t:r.YDomain[l][0],c=null!==(n=e.EndY)&&void 0!==n?n:r.YDomain[l][1],u=r.XTransformation(e.XVals[0]),f=r.XTransformation(e.XVals[1]),d=r.YTransformation(s,l),h=r.YTransformation(c,l),m=Math.abs(h-d),p=Math.abs(f-u);return o.createElement("g",null,o.createElement("rect",{x:Math.min(u,f),y:Math.min(d,h),width:p,height:m,fill:e.Color,opacity:e.Opacity,stroke:null!==(i=e.Stroke)&&void 0!==i?i:"none"}))}},6460:function(e,t,n){var o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(e){a={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(t,"__esModule",{value:!0});var a=n(6904),i=n(84917);t.default=function(e){var t=a.useContext(i.GraphContext),n=o(a.useState(e.Value),2),r=n[0],l=n[1],s=o(a.useState(!1),2),c=s[0],u=s[1],f=o(a.useState(""),2),d=f[0],h=f[1];function m(n){var o=i.AxisMap.get(e.axis),a=void 0===e.start?t.XDomain[0]:e.start,r=void 0===e.end?t.XDomain[1]:e.end;return"M ".concat(t.XTransformation(a)," ").concat(t.YTransformation(n,o)," L ").concat(t.XTransformation(r)," ").concat(t.YTransformation(n,o))}var p=a.useCallback((function(n,o){var a=i.AxisMap.get(e.axis),r=t.YTransformation(e.Value,a),l=t.YTransformation(o,a);l<=r+e.width/2&&l>=r-e.width/2&&u(!0)}),[e.width,e.Value,e.axis,t.YTransformation]);return a.useEffect((function(){var n=t.RegisterSelect({axis:e.axis,allowSnapping:!1,onClick:p,onRelease:function(e){return u(!1)},onPlotLeave:function(e){return u(!1)}});return h(n),function(){t.RemoveSelect(n)}}),[]),a.useEffect((function(){""!==d&&t.UpdateSelect(d,{axis:e.axis,allowSnapping:!1,onClick:p,onRelease:function(e){return u(!1)},onPlotLeave:function(e){return u(!1)}})}),[p]),a.useEffect((function(){l(e.Value)}),[e.Value]),a.useEffect((function(){void 0!==e.setValue&&(c||e.Value===r||e.setValue(r))}),[c,r]),a.useEffect((function(){"select"!==t.CurrentMode&&u(!1)}),[t.CurrentMode]),a.useEffect((function(){c&&l(t.YHoverSnap[i.AxisMap.get(e.axis)])}),[t.YHoverSnap,e.axis]),a.createElement("g",null,a.createElement("path",{d:m(e.Value),style:{fill:"none",strokeWidth:e.width,stroke:e.color},strokeDasharray:i.LineMap.get(e.lineStyle)}),void 0!==e.setValue&&e.Value!==r&&c?a.createElement("path",{d:m(r),style:{fill:"none",strokeWidth:e.width,stroke:e.color,opacity:.5},strokeDasharray:i.LineMap.get(e.lineStyle)}):null)}},11505:function(e,t,n){var o=n(78),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(e){a={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(t,"__esModule",{value:!0});var i=n(6904),r=n(84917),l=function(e){var t;return i.createElement("path",{d:"M ".concat(e.x," ").concat(e.y," h ").concat(e.width," v ").concat(e.height," h -").concat(e.width," v -").concat(e.height),stroke:"black",style:{opacity:null!==(t=e.opacity)&&void 0!==t?t:1}})};t.default=function(e){var t=i.useContext(r.GraphContext),n=a(i.useState(!1),2),s=n[0],c=n[1],u=a(i.useState({x:e.x,y:e.y}),2),f=u[0],d=u[1],h=a(i.useState({width:100,height:100}),2),m=h[0],p=h[1],v=a(i.useState(""),2),g=v[0],y=v[1],x=i.useCallback((function(n){var o,a,i,r=null!==(o=e.usePixelPositioning)&&void 0!==o&&o?t.XApplyPixelOffset(n):t.XTransformation(n);switch(e.origin){case"lower-right":case"upper-right":r-=m.width+(null!==(a=e.offset)&&void 0!==a?a:0);break;case"lower-center":case"upper-center":r-=Math.floor(m.width/2);break;case void 0:case"lower-left":case"upper-left":r+=null!==(i=e.offset)&&void 0!==i?i:0}return r}),[t.XApplyPixelOffset,t.XTransformation,e.origin,e.offset,e.usePixelPositioning,m]),M=i.useCallback((function(n){var o,a,i,l=null!==(o=e.usePixelPositioning)&&void 0!==o&&o?t.YApplyPixelOffset(n):t.YTransformation(n,r.AxisMap.get(e.axis));switch(e.origin){case void 0:case"upper-left":case"upper-right":case"upper-center":l+=null!==(a=e.offset)&&void 0!==a?a:0;break;case"lower-left":case"lower-right":case"lower-center":l-=m.height+(null!==(i=e.offset)&&void 0!==i?i:0)}return l}),[t.YApplyPixelOffset,t.YTransformation,e.origin,e.offset,e.usePixelPositioning,e.axis,m]),S=i.useCallback((function(n,o){var a=x(e.x),i=t.XTransformation(n),l=M(e.y),s=t.YTransformation(o,r.AxisMap.get(e.axis));i<=a+m.width&&i>=a&&s<=l+m.height&&s>=l&&c(!0)}),[e.x,e.y,x,M,m,c,t.XTransformation,t.YTransformation,e.axis]),b=void 0===e.onMouseMove?void 0:i.useCallback((function(t,n){void 0!==e.onMouseMove&&e.onMouseMove(t,n)}),[e.onMouseMove]);return i.useEffect((function(){var n=t.RegisterSelect({axis:e.axis,allowSnapping:!1,onRelease:function(e){return c(!1)},onPlotLeave:function(e){return c(!1)},onClick:S,onMove:b});return y(n),function(){t.RemoveSelect(n)}}),[]),i.useEffect((function(){""!==g&&t.UpdateSelect(g,{axis:e.axis,allowSnapping:!1,onRelease:function(e){return c(!1)},onPlotLeave:function(e){return c(!1)},onClick:S,onMove:b})}),[S,b,e.axis]),i.useEffect((function(){d({x:e.x,y:e.y})}),[e.x,e.y]),i.useEffect((function(){void 0!==e.setPosition&&(s||e.x===f.x&&e.y===f.y||e.setPosition(f.x,f.y))}),[s,f]),i.useEffect((function(){"select"!==t.CurrentMode&&c(!1)}),[t.CurrentMode]),i.useEffect((function(){var n;!s||null!==(n=e.disallowSnapping)&&void 0!==n&&n||d({x:t.XHoverSnap,y:t.YHoverSnap[r.AxisMap.get(e.axis)]})}),[t.XHoverSnap,t.YHoverSnap,e.axis]),i.useEffect((function(){var n;s&&null!==(n=e.disallowSnapping)&&void 0!==n&&n&&d({x:t.XHover,y:t.YHover[r.AxisMap.get(e.axis)]})}),[t.XHover,t.YHover,e.axis]),i.useEffect((function(){var t=document.getElementById(e.childId);if(null==t)return o.error("Invalid element id passed for child element in infobox ".concat(e.childId)),void p({width:100,height:100});m.width===Math.ceil(t.clientWidth)&&m.height===Math.ceil(t.clientHeight)||p({width:Math.ceil(t.clientWidth),height:Math.ceil(t.clientHeight)})}),[e.children,e.childId]),i.createElement("g",null,i.createElement(l,{x:x(e.x),y:M(e.y),width:m.width,height:m.height,opacity:e.opacity}),i.createElement("foreignObject",{x:x(e.x),y:M(e.y),width:m.width,height:m.height},e.children),void 0===e.setPosition||e.x===f.x&&e.y===f.y?null:i.createElement(l,{x:x(f.x),y:M(f.y),width:m.width,height:m.height,opacity:e.opacity}))}},99723:function(e,t,n){var o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(e){a={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(t,"__esModule",{value:!0});var a=n(6904),i=n(94194),r=n(84998),l=a.memo((function(e){var t,n,l=a.useRef(void 0),c=o(a.useState(a.createElement(a.Fragment,null,i.Point)),2),u=c[0],f=c[1],d=o(a.useState(null!==(t=e.holdOpen)&&void 0!==t&&t),2),h=d[0],m=d[1],p=o(a.useState(void 0),2),v=p[0],g=p[1],y=o(a.useMemo((function(){var t,n=(null!==(t=e.holdOpen)&&void 0!==t&&t?1:0)+(e.showZoom?1:0)+(e.showZoom||e.showHorizontalZoom?1:0)+(e.showZoom||e.showVerticalZoom?1:0)+(e.showPan?1:0)+(e.showReset?1:0)+(e.showSelect?1:0)+(e.showDownload?1:0)+(e.showCapture?1:0)+(null==e.children?0:a.Children.count(e.children)),o=Math.floor((e.heightAvaliable-20)/25),i=20*Math.ceil(n/o);return[n=Math.min(n,o),25*(n-1),i]}),[e.holdOpen,e.showZoom,e.showPan,e.showReset,e.showSelect,e.showDownload,e.showCapture,e.children]),3),x=y[0],M=y[1],S=y[2],b=a.useCallback((function(t,n){f(t),g(n),e.setSelection("select"),T()}),[e.setSelection]),E=a.useCallback((function(e){e.stopPropagation(),m(!0)}),[m]),T=a.useCallback((function(){var t;null!==(t=e.holdOpen)&&void 0!==t&&t||m(!1)}),[e.holdOpen]),w=a.useMemo((function(){switch(e.currentSelection){default:case"pan":return i.Pan;case"zoom-rectangular":return i.MagnifyingGlass;case"zoom-vertical":return"‖";case"zoom-horizontal":return"═";case"select":return u}}),[u,e.currentSelection]);if(a.useEffect((function(){h?e.setWidth(S):e.setWidth(20)}),[S,h]),0===x)return null;if(1===x||!h)return a.createElement("g",null,a.createElement("circle",{stroke:"black",onClick:E,r:10,cx:e.x,cy:e.y,style:{fill:"#002eff",pointerEvents:"all"},onMouseDown:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()}}),a.createElement("text",{fill:"black",style:{fontSize:"1em",textAnchor:"middle",dominantBaseline:"middle"},x:e.x,y:e.y},w));var C=[[]],D=[[]];null!==(n=e.holdOpen)&&void 0!==n&&n&&(C[C.length-1].length<x?(C[C.length-1].push(a.createElement(r.default,{onClick:function(){return m(!1)}},"^")),D[C.length-1].push("collaspe")):(C.push([a.createElement(r.default,{onClick:function(){return m(!1)}},"^")]),D.push(["collaspe"]))),e.showZoom&&(C[C.length-1].length<x?(D[D.length-1].push("zoom-rectangular"),C[C.length-1].push(a.createElement(r.default,{onClick:function(){e.setSelection("zoom-rectangular"),T()}},i.MagnifyingGlass))):(D.push(["zoom-rectangular"]),C.push([a.createElement(r.default,{onClick:function(){e.setSelection("zoom-rectangular"),T()}},i.MagnifyingGlass)]))),(e.showZoom||e.showVerticalZoom)&&(C[C.length-1].length<x?(D[D.length-1].push("zoom-vertical"),C[C.length-1].push(a.createElement(r.default,{onClick:function(){e.setSelection("zoom-vertical"),T()}},"‖"))):(D.push(["zoom-vertical"]),C.push([a.createElement(r.default,{onClick:function(){e.setSelection("zoom-vertical"),T()}},"‖")]))),(e.showZoom||e.showHorizontalZoom)&&(C[C.length-1].length<x?(D[D.length-1].push("zoom-horizontal"),C[C.length-1].push(a.createElement(r.default,{onClick:function(){e.setSelection("zoom-horizontal"),T()}},"═"))):(D.push(["zoom-horizontal"]),C.push([a.createElement(r.default,{onClick:function(){e.setSelection("zoom-horizontal"),T()}},"═")]))),e.showPan&&C[C.length-1].length<x?(D[C.length-1].push("pan"),C[C.length-1].push(a.createElement(r.default,{onClick:function(){e.setSelection("pan"),T()}},i.Pan))):e.showPan&&(D.push(["pan"]),C.push([a.createElement(r.default,{onClick:function(){e.setSelection("pan"),T()}},i.Pan)])),e.showSelect&&C[C.length-1].length<x?(D[C.length-1].push("select"),C[C.length-1].push(a.createElement(r.default,{isSelect:!0,onClick:function(){b(a.createElement(a.Fragment,null,i.Point),"select")}},i.Point))):e.showSelect&&(D.push(["select"]),C.push([a.createElement(r.default,{isSelect:!0,onClick:function(){b(a.createElement(a.Fragment,null,i.Point),"select")}},i.Point)])),e.showReset&&C[C.length-1].length<x?(D[C.length-1].push("reset"),C[C.length-1].push(a.createElement(r.default,{onClick:function(){T(),e.setSelection("reset")}},i.House))):e.showReset&&(D.push(["reset"]),C.push([a.createElement(r.default,{onClick:function(){T(),e.setSelection("reset")}},i.House)])),e.showDownload&&C[C.length-1].length<x?(D[C.length-1].push("download"),C[C.length-1].push(a.createElement(r.default,{onClick:function(){T(),e.setSelection("download")}},i.InputNumbers))):e.showDownload&&(D.push(["download"]),C.push([a.createElement(r.default,{onClick:function(){T(),e.setSelection("download")}},i.InputNumbers)])),e.showCapture&&C[C.length-1].length<x?(D[C.length-1].push("capture"),C[C.length-1].push(a.createElement(r.default,{onClick:function(){T(),e.setSelection("capture")}},i.Scroll))):e.showCapture&&(D.push(["capture"]),C.push([a.createElement(r.default,{onClick:function(){T(),e.setSelection("capture")}},i.Scroll)]));var P=C.length-1;a.Children.forEach(e.children,(function(e,t){C[C.length-1].length<x&&a.isValidElement(e)&&e.type===r.default?(C[C.length-1].push(e),D[C.length-1].push("custom-"+t)):a.isValidElement(e)&&e.type===r.default&&(C.push([e]),D.push(["custom-"+t]))}));var k="M ".concat(e.x-10," ").concat(e.y," A 10 10 90 0 1 ").concat(e.x," ").concat(e.y-10," h ").concat(S-20," A 10 10 90 0 1 ").concat(e.x+S-10," ").concat(e.y," v ").concat(M," A 10 10 90 0 1 ").concat(e.x+S-20," ").concat(e.y+M+10," h ").concat(20-S," A 10 10 90 0 1 ").concat(e.x-10," ").concat(e.y+M," v ").concat(-M);return a.createElement("g",{style:{cursor:"default"},"data-html2canvas-ignore":"true"},a.createElement("path",{d:k,style:{fill:"#1e90ff"}}),C.map((function(t,n){return a.createElement(a.Fragment,null," ",t.map((function(t,o){return a.createElement(s,{key:o,selectId:D[n][o],x:e.x+20*n,y:e.y+25*o,active:o<P?e.currentSelection===D[n][o]&&("select"!==e.currentSelection||void 0===v):"select"===e.currentSelection&&v===D[n][o],button:t,btnCleanup:l,setSelectIcon:D[n][o].startsWith("custom")?b:void 0})})))})),a.createElement("path",{d:k,stroke:"black"}))}));function s(e){return a.createElement(a.Fragment,null,a.createElement("circle",{r:10,cx:e.x,cy:e.y,style:{fill:e.active?"#002eff":"#1e90ff",pointerEvents:"all"},onMouseDown:function(e){return e.stopPropagation()},onClick:function(t){var n;t.stopPropagation(),void 0!==e.setSelectIcon&&null!==(n=e.button.props.isSelect)&&void 0!==n&&n&&e.setSelectIcon(e.button.props.children,e.selectId),void 0!==e.btnCleanup.current&&e.btnCleanup.current(),e.btnCleanup.current=e.button.props.onClick()},onMouseUp:function(e){return e.stopPropagation()}}),a.createElement("text",{fill:"black",style:{fontSize:"1em",textAnchor:"middle",dominantBaseline:"middle"},x:e.x,y:e.y},e.button))}t.default=l},52007:function(e,t,n){var o=n(78),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(e){a={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var o,a=0,i=t.length;a<i;a++)!o&&a in t||(o||(o=Array.prototype.slice.call(t,0,a)),o[a]=t[a]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.fontFamily=void 0;var r=n(6904),l=n(51935),s=n(84917),c=n(74016),u=n(24334),f=n(2925),d=n(74929);t.fontFamily="Courier New";var h=25,m="margin: auto auto auto 0px; display: inline-block; font-weight: 400; font-family: ".concat(t.fontFamily,";");t.default=r.memo((function(e){var n=r.useContext(s.GraphContext),p=r.useRef((function(e){})),v=a(r.useMemo((function(){var t=i([],a(n.Data.current.values()),!1).reduce((function(t,n){var a,i,r,l,s;return void 0===n.legend||e.HideDisabled&&null!==(r=null===(i=null===(a=n.legend)||void 0===a?void 0:a.props)||void 0===i?void 0:i.enabled)&&void 0!==r&&!r||((null===(l=n.legend)||void 0===l?void 0:l.type)===f.default?t.sm=t.sm+1:(null===(s=n.legend)||void 0===s?void 0:s.type)===d.default?t.lg=t.lg+1:(t.sm=t.sm+1,o.warn("Unknown legend element found. Please check legend component or children to legend."))),t}),{sm:0,lg:0});return[t.sm,t.lg]}),[n.DataGuid,e.HideDisabled]),2),g=v[0],y=v[1],x="bottom"===e.location?39:0,M="bottom"===e.location?e.graphWidth:e.width,S="right"===e.location?e.graphHeight:e.height,b="bottom"===e.location?25:Math.max(S/Math.max(g+y,1),25),E=b*("bottom"===e.location?2:1),T=Math.ceil(g/("bottom"===e.location?3:1))*b+y*E,w=T>S?(0,u.GetScrollbarWidth)():0,C=(M-x)/("bottom"===e.location?3:1)-w,D=M-x-w,P=a(r.useMemo((function(){var o,r,s=1,c=!1,p=0,v=0,g=i([],a(n.Data.current.values()),!1).map((function(e){return null==e?void 0:e.legend})),y=l.orderBy(g.filter((function(t){var n,o;return(!e.HideDisabled||null!==(o=null===(n=null==t?void 0:t.props)||void 0===n?void 0:n.enabled)&&void 0!==o&&o)&&(null==t?void 0:t.type)===f.default})),(function(e){var t,n,o;return null!==(o=null===(n=null===(t=null==e?void 0:e.props)||void 0===t?void 0:t.label)||void 0===n?void 0:n.length)&&void 0!==o?o:0}),["desc"]);y.length>0&&function(e){var n=1,o=(0,u.GetTextHeight)(t.fontFamily,"".concat(n,"em"),e,"".concat(m),"".concat(C-h,"px")),a=(0,u.GetTextWidth)(t.fontFamily,"".concat(n,"em"),e,"".concat(m),"".concat(o,"px"));a>v&&(v=a);for(var i=!1;n>.4&&(a>C-h||o>b);)n-=.05,a=(0,u.GetTextWidth)(t.fontFamily,"".concat(n,"em"),e,"".concat(m),"".concat(b,"px"),"".concat(i?"normal":void 0),"".concat(C-h,"px")),o=(0,u.GetTextHeight)(t.fontFamily,"".concat(n,"em"),e,"".concat(m),"".concat(C-h,"px"),"".concat(i?"normal":void 0)),i=!1,a>=C-h&&o<b&&(i=!0,o=(0,u.GetTextHeight)(t.fontFamily,"".concat(n,"em"),e,"".concat(m),"".concat(C-h,"px"),"".concat(i?"normal":void 0)),a=(0,u.GetTextWidth)(t.fontFamily,"".concat(n,"em"),e,"".concat(m),"".concat(b,"px"),"".concat(i?"normal":void 0),"".concat(C-h,"px")));n<s&&(s=n,c=i)}(null===(r=null===(o=y[0])||void 0===o?void 0:o.props)||void 0===r?void 0:r.label);var M=g.findIndex((function(t){var n,o;return e.HideDisabled&&!(null!==(o=null===(n=null==t?void 0:t.props)||void 0===n?void 0:n.enabled)&&void 0!==o&&o)&&(null==t?void 0:t.type)===d.default}));M>=0&&50>p&&(p=50),M>=0&&50>p&&(p=50);var S=(v+w)*("bottom"===e.location?3:1)+x,E=p+x+w;return[s,c,Math.max(S,E)]}),[n.DataGuid,e.HideDisabled,D,C,b,E,x,e.location,w]),3),k=P[0],A=P[1],Y=P[2],N=r.useMemo((function(){return{SmWidth:C,LgWidth:D,SmHeight:b,LgHeight:E,SmallestFontSize:k,UseMultiLine:A,SendMassEnable:p}}),[k,b,E,C,b,A]);return r.useEffect((function(){void 0!==e.RequestLegendHeight&&T!==S&&e.RequestLegendHeight(T)}),[T,S]),r.useEffect((function(){void 0!==e.RequestLegendWidth&&Y!==M&&e.RequestLegendWidth(Y)}),[Y,M]),r.useEffect((function(){p.current=function(t){var o=i([],a(n.Data.current.values()),!1).some((function(e){var n,o,a,i;return(null===(o=null===(n=null==e?void 0:e.legend)||void 0===n?void 0:n.props)||void 0===o?void 0:o.enabled)&&(null===(i=null===(a=null==e?void 0:e.legend)||void 0===a?void 0:a.props)||void 0===i?void 0:i.id)!==t}));e.SendMassCommand({requester:t,command:o?"disable-others":"enable-all"})}}),[n.DataGuid,e.SendMassCommand]),r.createElement(c.LegendContext.Provider,{value:N},r.createElement("div",{style:{height:S,width:M,paddingLeft:"".concat(x,"px"),position:"bottom"===e.location?"absolute":"relative",float:e.location,display:"flex",flexWrap:"wrap",bottom:0,overflowY:T>S?"scroll":"hidden",overflowX:T>S?"visible":"hidden",cursor:"default"}},i([],a(n.Data.current.values()),!1).map((function(t,n){var o,a;return void 0===t.legend||e.HideDisabled&&null!==(o=t.legend.props.enabled)&&void 0!==o&&!o?null:r.createElement("div",{key:n,"data-html2canvas-ignore":!(null===(a=t.legend.props.enabled)||void 0===a||a)},t.legend)}))))}))},74016:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LegendContext=void 0;var o=n(6904);t.LegendContext=o.createContext({SmWidth:0,LgWidth:0,SmHeight:0,LgHeight:0,SmallestFontSize:0,UseMultiLine:!1,SendMassEnable:void 0})},84512:function(e,t,n){var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},o.apply(this,arguments)},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(e){a={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.InternalLine=void 0;var i=n(6904),r=n(84917),l=n(32098),s=n(70894),c=n(2925);t.InternalLine=i.forwardRef((function(e,t){var n,o,u=a(i.useState(""),2),f=u[0],d=u[1],h=a(i.useState([NaN,NaN]),2),m=h[0],p=h[1],v=a(i.useState(!0),2),g=v[0],y=v[1],x=a(i.useState(null),2),M=x[0],S=x[1],b=i.useContext(r.GraphContext),E=i.useMemo((function(){var t,n,o;return null!==(t=e.showPoints)&&void 0!==t&&t||(null===(n=e.autoShowPoints)||void 0===n||n)&&(null!==(o=null==M?void 0:M.GetCount(b.XDomain[0],b.XDomain[1]))&&void 0!==o?o:1e3)<=100}),[e.showPoints,e.autoShowPoints,M,b.XDomain]),T=null!==(n=null==M?void 0:M.GetData(b.XDomain[0],b.XDomain[1],!0))&&void 0!==n?n:[];i.useImperativeHandle(t,(function(){return M}),[M]);var w=i.useCallback((function(){var t;if(void 0!==e.legend&&""!==f){var n=e.legend;return null===(t=e.highlightHover)||void 0===t||!t||isNaN(m[0])||isNaN(m[1])||(n+=" (".concat(l.utc(m[0]).format("MM/DD/YY hh:mm:ss"),": ").concat(m[1].toPrecision(6),")")),i.createElement(c.default,{id:f,label:n,color:e.color,lineStyle:e.lineStyle,setEnabled:y,enabled:g,hasNoData:null==M})}}),[e.color,e.lineStyle,g,M,e.legend,f]),C=i.useCallback((function(){return{legend:w(),axis:e.axis,enabled:g,getMax:function(e){return null!=M&&g?M.GetLimits(e[0],e[1])[1]:-1/0},getMin:function(e){return null!=M&&g?M.GetLimits(e[0],e[1])[0]:1/0},getPoints:function(e,t){return null!=M&&g?M.GetPoints(e,null!=t?t:1):NaN}}}),[e.axis,g,M,w,e.reRender]);i.useEffect((function(){""!==f&&b.UpdateData(f,C())}),[C]),i.useEffect((function(){if(null==M||null==e.data||0===e.data.length||isNaN(b.XHover))p([NaN,NaN]);else try{var t=M.GetPoint(b.XHover);null!=t&&p(t)}catch(e){p([NaN,NaN])}}),[M,b.XHover]),i.useEffect((function(){"enable-all"===b.MassEnableCommand.command?y(!0):"disable-others"===b.MassEnableCommand.command&&y(f===b.MassEnableCommand.requester)}),[b.MassEnableCommand]),i.useEffect((function(){null==e.data?S(null):S(new s.PointNode(e.data))}),[e.data]),i.useEffect((function(){""!==f&&b.SetLegend(f,w())}),[m,g]),i.useEffect((function(){var e=b.AddData(C());return d(e),function(){b.RemoveData(e)}}),[]);var D=i.useCallback((function(t){return 0===t.length?"":"M "+t.map((function(t,n){var o=b.XTransformation(t[0]),a=b.YTransformation(t[1],r.AxisMap.get(e.axis));return"".concat(o,",").concat(a)})).join(" L ")}),[b.XTransformation,b.YTransformation,e.axis]);return g?i.createElement("g",null,i.createElement("path",{d:D(T),style:{fill:"none",strokeWidth:void 0===e.width?3:e.width,stroke:e.color},strokeDasharray:r.LineMap.get(e.lineStyle)}),E&&null!=M?T.map((function(t,n){return i.createElement("circle",{key:n,r:3,cx:b.XTransformation(t[0]),cy:b.YTransformation(t[1],r.AxisMap.get(e.axis)),fill:e.color,stroke:"currentColor",style:{opacity:.8}})})):null,null===(o=e.highlightHover)||void 0===o||!o||isNaN(m[0])||isNaN(m[1])?null:i.createElement("circle",{r:5,cx:b.XTransformation(m[0]),cy:b.YTransformation(m[1],r.AxisMap.get(e.axis)),fill:e.color,stroke:"currentColor",style:{opacity:.8}})):null})),t.default=function(e){return i.createElement(t.InternalLine,o({},e))}},2925:function(e,t,n){var o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(e){a={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(t,"__esModule",{value:!0});var a=n(6904),i=n(94194),r=n(74016),l=n(52007);t.default=function(e){var t,n=a.useRef(null),s=o(a.useState(null!==(t=e.label)&&void 0!==t?t:""),2),c=s[0],u=s[1],f=a.useContext(r.LegendContext);return a.useEffect((function(){u((e.hasNoData?i.Warning:"")+e.label)}),[e.hasNoData,e.label]),a.createElement("div",{style:{height:f.SmHeight,width:f.SmWidth},ref:n},a.createElement("div",{onClick:function(t){t.ctrlKey&&null!=f.SendMassEnable?f.SendMassEnable.current(e.id):e.setEnabled(!e.enabled)},style:{width:"100%",display:"flex",alignItems:"center",marginRight:"5px",height:"100%"}},"-"===e.lineStyle?a.createElement("div",{style:{width:"10px",height:0,borderTop:"2px solid ".concat(e.color),borderRight:"10px solid ".concat(e.color),borderBottom:"2px solid ".concat(e.color),borderLeft:"10px solid ".concat(e.color),overflow:"hidden",marginRight:"5px",opacity:e.enabled?1:.5}}):a.createElement("div",{style:{width:"10px",height:"4px",borderTop:"none",borderRight:"3px solid ".concat(e.color),borderBottom:"none",borderLeft:"3px solid ".concat(e.color),overflow:"hidden",marginRight:"5px",opacity:e.enabled?1:.5}}),a.createElement("label",{style:{fontFamily:l.fontFamily,fontWeight:400,display:"inline-block",margin:"auto",marginLeft:0,fontSize:f.SmallestFontSize+"em",whiteSpace:f.UseMultiLine?"normal":"nowrap"}},c)))}},28201:function(e,t,n){var o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(e){a={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var o,a=0,i=t.length;a<i;a++)!o&&a in t||(o||(o=Array.prototype.slice.call(t,0,a)),o[a]=t[a]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var i=n(6904),r=n(84917),l=n(32098),s=n(70894),c=n(24334),u=n(2925);t.default=function(e){var t,n,f=o(i.useState(""),2),d=f[0],h=f[1],m=o(i.useState([NaN,NaN]),2),p=m[0],v=m[1],g=o(i.useState(!0),2),y=g[0],x=g[1],M=o(i.useState(0),2),S=M[0],b=M[1],E=o(i.useState(null),2),T=E[0],w=E[1],C=o(i.useState([NaN,NaN]),2),D=C[0],P=C[1],k=i.useContext(r.GraphContext);function A(){var t;if(void 0!==e.legend&&""!==d){var n=e.legend;return null===(t=e.highlightHover)||void 0===t||!t||isNaN(p[0])||isNaN(p[1])||(n+=" (".concat(l.utc(p[0]).format("MM/DD/YY hh:mm:ss"),": ").concat(p[1].toPrecision(6),")")),i.createElement(u.default,{id:d,label:n,color:e.color,lineStyle:e.lineStyle,setEnabled:x,enabled:y,hasNoData:null==T})}}return i.useEffect((function(){""!==d&&k.UpdateData(d,{legend:A(),getMax:function(e){return null!=T&&y?Math.max(T.GetLimits(e[0],e[1])[1],D[1]):-1/0},getMin:function(e){return null!=T&&y?Math.min(T.GetLimits(e[0],e[1])[0],D[0]):1/0}})}),[e,T,y]),i.useEffect((function(){if(0===e.data.length||isNaN(k.XHover)||null===T)v([NaN,NaN]);else{var t=T.GetPoint(k.XHover);null!=t&&v(t)}}),[T,k.XHover]),i.useEffect((function(){"enable-all"===k.MassEnableCommand.command?x(!0):"disable-others"===k.MassEnableCommand.command&&x(d===k.MassEnableCommand.requester)}),[k.MassEnableCommand]),i.useEffect((function(){w(new s.PointNode(e.data))}),[e.data]),i.useEffect((function(){""!==d&&k.SetLegend(d,A())}),[p,y,S]),i.useEffect((function(){if(void 0!==e.legend)if(void 0!==e.highlightHover){var t=e.legend+" (".concat(l().format("MM/DD/YY hh:mm:ss"),": ").concat((-99.999999).toPrecision(8),")");b((0,c.GetTextWidth)("Segoe UI","1em",t)+45)}else b((0,c.GetTextWidth)("Segoe UI","1em",e.legend)+45)}),[e.legend,e.highlightHover]),i.useEffect((function(){return h(k.AddData({legend:A(),getMax:function(e){return null!=T&&y?Math.max(T.GetLimits(e[0],e[1])[1],D[1]):-1/0},getMin:function(e){return null!=T&&y?Math.min(T.GetLimits(e[0],e[1])[0],D[0]):1/0}})),function(){k.RemoveData(d)}}),[]),i.useEffect((function(){P([Math.min.apply(Math,a([],o(e.threshHolds.map((function(e){return e.Value}))),!1)),Math.max.apply(Math,a([],o(e.threshHolds.map((function(e){return e.Value}))),!1))])}),[e.threshHolds]),y?i.createElement("g",null,i.createElement("path",{d:(n="M ",null==T?"":n+=T.GetFullData().map((function(t,n){var o=k.XTransformation(t[0]),a=k.YTransformation(t[1],r.AxisMap.get(e.axis));return"".concat(o,",").concat(a)})).join(" L ")),style:{fill:"none",strokeWidth:3,stroke:e.color,transition:"d 0.5s"},strokeDasharray:r.LineMap.get(e.lineStyle)}),null!=T?T.GetFullData().map((function(t,n){return i.createElement("circle",{key:n,r:3,cx:k.XTransformation(t[0]),cy:k.YTransformation(t[1],r.AxisMap.get(e.axis)),fill:e.color,stroke:"black",style:{opacity:.8,transition:"cx 0.5s,cy 0.5s"}})})):null,null===(t=e.highlightHover)||void 0===t||!t||isNaN(p[0])||isNaN(p[1])?null:i.createElement("circle",{r:5,cx:k.XTransformation(p[0]),cy:k.YTransformation(p[1],r.AxisMap.get(e.axis)),fill:e.color,stroke:"black",style:{opacity:.8,transition:"cx 0.5s,cy 0.5s"}}),e.threshHolds.map((function(t,n){return i.createElement("path",{key:n,d:"M ".concat(k.XTransformation(k.XDomain[0]),",").concat(k.YTransformation(t.Value,r.AxisMap.get(e.axis))," H ").concat(k.XTransformation(k.XDomain[1])),style:{fill:"none",strokeWidth:3,stroke:t.Color,transition:"d 0.5s"},strokeDasharray:"10,5"})}))):null}},14395:function(e,t,n){var o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(e){a={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var o,a=0,i=t.length;a<i;a++)!o&&a in t||(o||(o=Array.prototype.slice.call(t,0,a)),o[a]=t[a]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var i=n(6904),r=n(84917),l=n(24334);t.default=i.memo((function(e){var t,n,s,c,u=i.useContext(r.GraphContext),f=o(i.useState([]),2),d=f[0],h=f[1],m=o(i.useState(0),2),p=m[0],v=m[1],g=o(i.useState(0),2),y=g[0],x=g[1],M=o(i.useState(0),2),S=M[0],b=M[1],E=o(i.useState(0),2),T=E[0],w=E[1],C=o(i.useState(0),2),D=C[0],P=C[1];return i.useEffect((function(){u.XDomain[0]<=0&&(u.XDomain[0]=Math.pow(10,Math.floor(-1*Math.log10(Math.abs(u.XDomain[0]))))),u.XDomain[1]<=0&&(u.XDomain[1]=Math.pow(10,-1*Math.ceil(Math.log10(Math.abs(u.XDomain[1])))+1));var e=Math.ceil(Math.max(Math.log10(u.XDomain[0]),Math.log10(u.XDomain[1]))),t=Math.floor(Math.min(Math.log10(u.XDomain[0]),Math.log10(u.XDomain[1])));b(e-t),P(t)}),[u.XDomain]),i.useEffect((function(){var e=setTimeout((function(){w(S<3?S/2*.25:S>=3&&S<6?.5:Math.floor(S/4))}),500);return function(){clearTimeout(e)}}),[S]),i.useEffect((function(){var t=void 0!==e.label?(0,l.GetTextHeight)("Segoe UI","1em",e.label):0;v(t)}),[d,e.label]),i.useEffect((function(){var e=Math.max.apply(Math,a([],o(d.map((function(e){return(0,l.GetTextHeight)("Segoe UI","1em",e.toString())}))),!1));e=(isFinite(e)?e:0)+12,x(e)}),[d]),i.useEffect((function(){y+p!==e.heightAxis&&e.setHeight(y+p)}),[y,p,e.heightAxis,e.setHeight]),i.useEffect((function(){var e;if(0===S||0===T)e=u.XDomain[0]<0?[Math.pow(10,Math.floor(-1*Math.log10(Math.abs(u.XDomain[0])))),Math.pow(10,Math.abs(Math.ceil(Math.log10(u.XDomain[1]))))]:[Math.pow(10,Math.log10(u.XDomain[0]))];else{if(e=[Math.pow(10,D)],S>=3)for(var t=D+T;t<=Math.log10(u.XDomain[1])+T;t+=T)if(!Number.isInteger(t)&&t>1&&S>3){var n=Math.floor(Math.pow(10,t)/Math.pow(10,Math.ceil(t)))*Math.pow(10,Math.ceil(t)),o=Math.ceil(Math.pow(10,t)/Math.pow(10,Math.floor(t)))*Math.pow(10,Math.floor(t));Math.abs(o-Math.pow(10,t))<Math.abs(n-Math.pow(10,t))?e.push(o):e.push(n)}else e.push(Math.pow(10,t));if((e=e.filter((function(e){return e>=u.XDomain[0]&&e<=u.XDomain[1]}))).length<3){var a=.5*(Math.log10(u.XDomain[0])+Math.log10(u.XDomain[1]));e=[u.XDomain[0],Math.pow(10,a),u.XDomain[1]]}}h(e.map((function(e){return Math.max(e,u.XDomain[0])})))}),[u.XDomain,S,T]),i.createElement("g",null,i.createElement("path",{stroke:"black",style:{strokeWidth:1},d:"M ".concat(e.offsetLeft-(null===(t=e.showLeftMostTick)||void 0===t||t?0:8)," ").concat(e.height-e.offsetBottom," H ").concat(e.width-e.offsetRight+(null===(n=e.showRightMostTick)||void 0===n||n?0:8))}),null===(s=e.showLeftMostTick)||void 0===s||s?i.createElement("path",{stroke:"black",style:{strokeWidth:1},d:"M ".concat(e.offsetLeft," ").concat(e.height-e.offsetBottom," v ").concat(8)}):null,null===(c=e.showRightMostTick)||void 0===c||c?i.createElement("path",{stroke:"black",style:{strokeWidth:1},d:"M ".concat(e.width-e.offsetRight," ").concat(e.height-e.offsetBottom," v ").concat(8)}):null,void 0===e.showTicks||e.showTicks?i.createElement(i.Fragment,null,d.map((function(t,n){var o;return i.createElement("path",{key:t.toFixed(50),stroke:"lightgrey",strokeOpacity:null!==(o=e.showGrid)&&void 0!==o&&o?"0.8":"0.0",style:{strokeWidth:1,transition:"d 0.5s"},d:"M ".concat(u.XTransformation(t)," ").concat(e.height-e.offsetBottom," V ").concat(e.offsetTop)})})),d.map((function(t,n){return i.createElement("path",{key:t.toFixed(50),stroke:"black",style:{strokeWidth:1,transition:"d 0.5s"},d:"M ".concat(u.XTransformation(t)," ").concat(e.height-e.offsetBottom+6," v ").concat(-6)})})),d.map((function(t,n){return i.createElement("text",{fill:"black",key:t.toFixed(50),style:{fontSize:"1em",textAnchor:"middle",dominantBaseline:"hanging",transition:"x 0.5s, y 0.5s"},y:e.height-e.offsetBottom+8,x:u.XTransformation(t)},t.toFixed((o=t)>=1?0:Math.floor(Math.abs(-Math.log10(o)))>100?100:Math.abs(Math.floor(Math.log10(o)))));var o}))):null,void 0!==e.label?i.createElement("text",{fill:"black",style:{fontSize:"1em",textAnchor:"middle",dominantBaseline:"middle"},x:e.offsetLeft+(e.width-e.offsetLeft-e.offsetRight)/2,y:e.height-e.offsetBottom+y},e.label):null)}))},71681:function(e,t,n){var o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(e){a={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(t,"__esModule",{value:!0});var a=n(24334),i=n(6904),r=n(84917);t.default=function(e){var t,n=i.useContext(r.GraphContext),l=o(i.useState(""),2),s=l[0],c=l[1],u=o(i.useState(1),2),f=u[0],d=u[1],h=i.useMemo((function(){var t=r.AxisMap.get(e.Axis),o=n.YTransformation(e.YData[0],t),a=n.YTransformation(e.YData[1],t);return Math.abs(a-o)}),[n.YTransformation,e.YData,e.Axis,n.UpdateFlag]),m=i.useMemo((function(){return Math.abs(n.XTransformation(e.XData[1])-n.XTransformation(e.XData[0]))}),[n.XTransformation,e.XData,n.UpdateFlag]),p=i.useMemo((function(){return Math.min(h/2,m/2,e.RadiusPX)}),[h,m,e.RadiusPX]),v=i.useCallback((function(t){var n=o(t,2),a=n[0],i=n[1],r=o(e.XData,2),l=r[0],s=r[1];if(i>=l&&a<=s)return Math.max(e.YData[0],e.YData[1])}),[e.XData,e.YData]),g=i.useCallback((function(t){var n=o(t,2),a=n[0],i=n[1],r=o(e.XData,2),l=r[0],s=r[1];if(i>=l&&a<=s)return Math.min(e.YData[0],e.YData[1])}),[e.XData,e.YData]);i.useEffect((function(){""!==s&&n.UpdateData(s,{axis:e.Axis,legend:void 0,getMax:v,getMin:g})}),[e.Axis,v,g,s]),i.useEffect((function(){var t=n.AddData({axis:e.Axis,legend:void 0,getMax:v,getMin:g});return c(t),function(){n.RemoveData(t)}}),[]),i.useEffect((function(){if(void 0!==e.Text){for(var t,n="Segoe UI",o=.05,i=5,r=o;i-o>.01;){var l=(i+o)/2,s=(t=l,{dX:(0,a.GetTextWidth)(n,t+"em",e.Text),dY:(0,a.GetTextHeight)(n,t+"em",e.Text)});s.dX<=m&&s.dY<=h?(r=l,o=l):i=l}d(r)}}),[e.Text,h,m,n.UpdateFlag]),i.useEffect((function(){""!==s&&void 0!==e.OnClick&&n.UpdateSelect(s,{onClick:y})}),[e.OnClick,n.UpdateFlag]);var y=i.useCallback((function(t,a){if(void 0!==e.OnClick){var i=o(e.XData,2),r=i[0],l=i[1],s=o(e.YData,2),c=s[0],u=s[1];t>=r&&t<=l&&a>=c&&a<=u&&e.OnClick(t,a,{setYDomain:n.SetYDomain,setTDomain:n.SetXDomain})}}),[e.OnClick,e.Axis,e.XData,e.YData,n.XTransformation,n.YTransformation,n.SetXDomain,n.SetYDomain]),x=i.useMemo((function(){var t=n.XTransformation(e.XData[0]),o=n.XTransformation(e.XData[1]),a=(t+o)/2;return null==e.TextPlacement||"center"===e.TextPlacement?a:"left"===e.TextPlacement?t:"right"===e.TextPlacement?o:a}),[n.XTransformation,e.XData,e.TextPlacement,n.UpdateFlag]);return isFinite(n.XTransformation((e.XData[0]+e.XData[1])/2))&&isFinite(n.YTransformation(e.YData[0],r.AxisMap.get(e.Axis)))&&isFinite(n.YTransformation(e.YData[1],r.AxisMap.get(e.Axis)))?i.createElement("g",null,i.createElement("rect",{x:n.XTransformation(e.XData[0]),width:m,y:n.YTransformation(e.YData[1],r.AxisMap.get(e.Axis)),height:h,rx:p,ry:p,fill:e.Color,opacity:e.Opacity,stroke:e.BorderColor,strokeWidth:e.BorderThickness,onClick:function(e){return y(e.clientX,e.clientY)}}),void 0!==e.Text?i.createElement("g",{clipPath:"url(#oval-clip-".concat(s,")")},i.createElement("text",{fill:null!==(t=e.TextColor)&&void 0!==t?t:"currentColor",style:{fontSize:f+"em",textAnchor:"middle",dominantBaseline:"middle"},y:(n.YTransformation(e.YData[0],r.AxisMap.get(e.Axis))+n.YTransformation(e.YData[1],r.AxisMap.get(e.Axis)))/2,x},e.Text)):null):null}},81377:function(e,t,n){var o=n(78),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(e){a={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var o,a=0,i=t.length;a<i;a++)!o&&a in t||(o||(o=Array.prototype.slice.call(t,0,a)),o[a]=t[a]);return e.concat(o||Array.prototype.slice.call(t))},r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var l=n(6904),s=n(51935),c=n(99723),u=n(84917),f=n(24334),d=n(51935),h=n(79474),m=n(14395),p=n(81823),v=n(52007),g=n(28201),y=n(84512),x=n(84998),M=n(6460),S=n(64462),b=n(57060),E=n(18718),T=n(71681),w=n(93107),C=n(11505),D=n(31594),P=n(22427),k=n(30371),A=n(95978),Y=n(86790),N=n(16463),H=P,X={fill:"none",userSelect:"none",WebkitTouchCallout:"none",WebkitUserSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",pointerEvents:"none"};t.default=function(e){var t,n,P,L,V,I,R,_,F=l.useCallback((function(e,t){if(null!=e)return e instanceof Object&&Object.prototype.hasOwnProperty.call(e,"length")?e[t]:0===t?e:void 0}),[]),G=l.useCallback((function(e){return void 0===e||0===e.length?[[0,1],[0,1]]:"number"==typeof e[0]?[e,[0,1]]:e}),[]),z=l.useRef(null),O=l.useRef(new Map),W=l.useRef({timeout:void 0,stopScroll:!1}),U=l.useRef({timeout:void 0,extraNeeded:0,captureID:void 0}),B=l.useMemo((function(){return(0,f.CreateGuid)()}),[]),j=l.useRef(new Map),q=a(l.useState(""),2),Z=q[0],$=q[1],K=a(l.useState(e.defaultTdomain),2),Q=K[0],J=K[1],ee=a(l.useState(0),2),te=ee[0],ne=ee[1],oe=a(l.useState(1),2),ae=oe[0],ie=oe[1],re=a(l.useState(Array(u.AxisMap.size).fill([0,0])),2),le=re[0],se=re[1],ce=a(l.useState(Array(u.AxisMap.size).fill(0)),2),ue=ce[0],fe=ce[1],de=a(l.useState(Array(u.AxisMap.size).fill(1)),2),he=de[0],me=de[1],pe=a(l.useState(Array(2).fill(0)),2),ve=pe[0],ge=pe[1],ye=a(l.useState("none"),2),xe=ye[0],Me=ye[1],Se=a(l.useState(function(e,t,n,o,a){return null!=e?e:"AutoValue"===t?"zoom-vertical":null==n||n?"zoom-rectangular":null==o||o?"zoom-vertical":null==a||a?"zoom-horizontal":"pan"}(e.defaultMouseMode,e.yDomain,e.zoom,e.xZoom,e.yZoom)),2),be=Se[0],Ee=Se[1],Te=a(l.useState(!1),2),we=Te[0],Ce=Te[1],De=a(l.useState([0,0]),2),Pe=De[0],ke=De[1],Ae=a(l.useState([0,0]),2),Ye=Ae[0],Ne=Ae[1],He=a(l.useState([0,0]),2),Xe=He[0],Le=He[1],Ve=a(l.useState("default"),2),Ie=Ve[0],Re=Ve[1],_e=l.useRef(!1),Fe=a(l.useState(!1),2),Ge=Fe[0],ze=Fe[1],Oe=a(l.useState(10),2),We=Oe[0],Ue=Oe[1],Be=a(l.useState(10),2),je=Be[0],qe=Be[1],Ze=a(l.useState(5),2),$e=Ze[0],Ke=Ze[1],Qe=a(l.useState(5),2),Je=Qe[0],et=Qe[1],tt=a(l.useState(0),2),nt=tt[0],ot=tt[1],at=a(l.useState(0),2),it=at[0],rt=at[1],lt=a(l.useState(0),2),st=lt[0],ct=lt[1],ut=a(l.useState(0),2),ft=ut[0],dt=ut[1],ht=a(l.useState(e.defaultTdomain),2),mt=ht[0],pt=ht[1],vt=a(l.useState(G(e.defaultYdomain)),2),gt=vt[0],yt=vt[1],xt=a(l.useState(0),2),Mt=xt[0],St=xt[1],bt=a(l.useState(null!==(t=e.legendHeight)&&void 0!==t?t:50),2),Et=bt[0],Tt=bt[1],wt=a(l.useState(null!==(n=e.legendWidth)&&void 0!==n?n:100),2),Ct=wt[0],Dt=wt[1],Pt=a(l.useState(e.height),2),kt=Pt[0],At=Pt[1],Yt=a(l.useState(e.width),2),Nt=Yt[0],Ht=Yt[1],Xt=a(l.useState(28),2),Lt=Xt[0],Vt=Xt[1],It=a(l.useState({requester:"",command:"none"}),2),Rt=It[0],_t=It[1],Ft=l.useContext(N.default),Gt=l.useMemo((function(){return Ft.HasConsumer?Ft.LegendWidth:Ct}),[Ft.HasConsumer,Ct,Ft.LegendWidth]),zt="AutoValue"!==e.yDomain&&(null===(P=e.zoom)||void 0===P||P),Ot="AutoValue"!==e.yDomain&&(null===(L=e.zoom)||void 0===L||L||null===(V=e.yZoom)||void 0===V||V),Wt=("AutoValue"===e.yDomain||null===(I=e.zoom)||void 0===I||I)&&(null===(R=e.xZoom)||void 0===R||R),Ut=void 0===e.pan||e.pan,Bt=Ut||zt||Ot||Wt;l.useEffect((function(){Ft.HasConsumer&&Ft.RegisterLegendWidth(B,Ct)}),[Ct,Ft.RegisterLegendWidth,Ft.HasConsumer,B]),l.useEffect((function(){if(Ft.HasConsumer)return function(){Ft.UnRegisterLegendWidth(B)}}),[B,Ft.HasConsumer,Ft.UnRegisterLegendWidth]);var jt=l.useCallback((function(e){var t=i([],a(le),!1),n=!1;t.forEach((function(t,o,a){n=e(t,o,a)||n})),n&&se(t)}),[le]);l.useEffect((function(){void 0!==e.legendHeight&&Tt(e.legendHeight)}),[e.legendHeight]),l.useEffect((function(){void 0!==e.legendWidth&&Dt(e.legendWidth)}),[e.legendWidth]),l.useEffect((function(){At(e.height-("bottom"===e.legend?Et:0))}),[e.height,e.legend,Et]),l.useEffect((function(){Ht(e.width-("right"===e.legend?Gt:0))}),[e.width,e.legend,Gt]),l.useEffect((function(){void 0!==e.Tmin&&Q[0]<e.Tmin&&J((function(t){var n;return[null!==(n=e.Tmin)&&void 0!==n?n:0,t[1]]})),void 0!==e.Tmax&&Q[1]>e.Tmax&&J((function(t){var n;return[t[0],null!==(n=e.Tmax)&&void 0!==n?n:0]}))}),[Q]),l.useEffect((function(){jt((function(t,n,o){var a=!1,i=F(e.Ymin,n),r=F(e.Ymax,n);return void 0!==i&&t[0]<i&&(o[n]=[i,t[1]],a=!0),void 0!==r&&t[1]>r&&(o[n]=[t[0],r],a=!0),a}))}),[le]),l.useEffect((function(){(0,d.isEqual)(mt,e.defaultTdomain)||pt(e.defaultTdomain)}),[e.defaultTdomain]),l.useEffect((function(){(0,d.isEqual)(gt,e.defaultYdomain)||yt(G(e.defaultYdomain))}),[e.defaultYdomain]),l.useEffect((function(){J(mt)}),[mt]),l.useEffect((function(){se(gt)}),[gt]),l.useEffect((function(){var e=nt+10,t=it;We!==e&&Ue(e),je!==t&&qe(t)}),[it,nt]),l.useEffect((function(){var t=st+("left"===e.menuLocation?Lt+2:10);Ke(t)}),[st,e.menuLocation,Lt]),l.useEffect((function(){var t=ft+("right"===e.menuLocation||void 0===e.menuLocation?Lt+2:10);et(t)}),[ft,e.menuLocation,Lt]),l.useEffect((function(){if("AutoValue"===e.yDomain||"HalfAutoValue"===e.yDomain){var t=function(e,t,n,o){if(o===u.AxisMap.get(t.axis)){var a=n([Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER]);void 0!==a&&e.push(a)}return e},n=gt.map((function(n,o){var r=Math.min.apply(Math,i([],a(i([],a(j.current.values()),!1).reduce((function(e,n){return t(e,n,n.getMin,o)}),[])),!1)),l=Math.max.apply(Math,i([],a(i([],a(j.current.values()),!1).reduce((function(e,n){return t(e,n,n.getMax,o)}),[])),!1));return!isNaN(r)&&!isNaN(l)&&isFinite(r)&&isFinite(l)?"AutoValue"===e.yDomain?[r,l]:Math.abs(l)>=Math.abs(r)?[0,l]:[r,0]:[0,1]}));s.isEqual(n,gt)||yt(n)}}),[Z,e.yDomain]),l.useEffect((function(){var e=Array(2),t=function(e){return i([],a(j.current.values()),!1).some((function(t){return u.AxisMap.get(e)===u.AxisMap.get(t.axis)}))};e[0]=t("left"),e[1]=t("right"),ge(e)}),[Z]),l.useEffect((function(){var t=Q[1]-Q[0],n=Q[0];if(0!==t){"log"===e.XAxisType&&(t=Math.log10(Q[1])-Math.log10(Q[0]),n=Math.log10(Q[0]));var o=(Nt-$e-Je)/t;ie(o),ne($e-n*o)}}),[Q,$e,Je,e.XAxisType,Nt]),l.useEffect((function(){var e,t,n,o,l,s,c,f=i([],a(he),!1),d=i([],a(ue),!1);try{for(var h=r(u.AxisMap.values()),m=h.next();!m.done;m=h.next())n=f,o=d,l=m.value,s=void 0,c=void 0,s=le[l][1]-le[l][0],c=(kt-We-je)/(0===s?1e-5:s),n[l]=-c,o[l]=kt-je+le[l][0]*c}catch(t){e={error:t}}finally{try{m&&!m.done&&(t=h.return)&&t.call(h)}finally{if(e)throw e.error}}me(f),fe(d)}),[le,We,je,kt]),l.useEffect((function(){St((function(e){return e+1}))}),[ae,te,he,ue]),l.useEffect((function(){var t;if(null==e.cursorOverride)switch(be){case"pan":t="grab";break;case"select":t="pointer";break;default:t="crosshair"}else t=e.cursorOverride;Re(t)}),[be,e.cursorOverride]),l.useEffect((function(){var e=function(e){W.current.stopScroll&&e.preventDefault()};return document.body.addEventListener("wheel",e,{passive:!1}),function(){return document.body.removeEventListener("wheel",e)}}),[]),l.useEffect((function(){Ge&&(clearTimeout(U.current.timeout),U.current.timeout=setTimeout((function(){var t,n=null!==(t=U.current.captureID)&&void 0!==t?t:B,a=document.getElementById(n);null==a?o.error("Could not find document element with id ".concat(n)):H(a).then((function(e){document.body.appendChild(e);var t=e.toDataURL("image/png").replace(/^data:image\/png/,"data:application/octet-stream"),o=document.createElement("a");o.href=t,o.download="".concat(n,".png"),document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(t),document.body.removeChild(o),document.body.removeChild(e)})),ze(!1),void 0!==e.onCaptureComplete&&e.onCaptureComplete()}),50))}));var qt=l.useCallback((function(t){var n,o="bottom"!==e.legend?kt:null!==(n=e.legendHeight)&&void 0!==n?n:50;if(Ge||(U.current.extraNeeded=Math.max(t-o,0)),"bottom"===e.legend){var a=Math.min(t,o);Et!==a&&Tt(a)}}),[e.legendHeight,Et,e.legend,Ge]),Zt=l.useCallback((function(t){var n;if(!(t<0)&&"right"===e.legend){var o=Math.min(t,null!==(n=e.legendWidth)&&void 0!==n?n:100);Ct!==o&&Dt(o)}}),[e.legendWidth,Ct,e.legend]),$t=l.useCallback((function(t){var n=(t-te)/ae;return"log"===e.XAxisType&&(n=Math.pow(10,(t-te)/ae)),n}),[te,ae,e.XAxisType]),Kt=l.useCallback((function(e,t){var n="number"!=typeof t?u.AxisMap.get(t):t;return(e-ue[n])/he[n]}),[ue,he]),Qt=l.useCallback((function(){J(mt),se(gt)}),[gt,mt]),Jt=l.useCallback((function(t){var n=t*ae+te;if("log"===e.XAxisType){var o=0===t?.01*Q[0]:t;n=Math.log10(o)*ae+te}return n}),[ae,te,e.XAxisType,Q]),en=l.useCallback((function(e,t){var n="number"!=typeof t?u.AxisMap.get(t):t;return e*he[n]+ue[n]}),[he,ue]),tn=l.useCallback((function(e){return e>=0?Math.min(e+$e,Nt-Je):Math.max($e,Nt-Je+e)}),[$e,Je,Nt]),nn=l.useCallback((function(e){return e>=0?Math.min(e+We,kt-je):Math.max(We,kt-je+e)}),[We,je,kt]),on=l.useCallback((function(e,t){$((0,f.CreateGuid)()),null!=t?j.current.set(e,t):j.current.delete(e)}),[]),an=l.useCallback((function(e){var t=(0,f.CreateGuid)();return on(t,e),t}),[]),rn=l.useCallback((function(e,t){var n=j.current.get(e);void 0!==n&&(n.legend=t,j.current.set(e,n))}),[]);function ln(e){var t=$t(e.x);return i([],a(j.current.values()),!1).reduce((function(n,o){return function(n,o){var a=o.getPoints(t,7);if(void 0===a)return n;var i=a.reduce((function(t,n){var a=[Jt(n[0]),en(n[1],u.AxisMap.get(o.axis))],i=Math.pow(a[0]-e.x,2)+Math.pow(a[1]-e.y,2);return void 0===t.distSq||i<t.distSq?{pt:{x:a[0],y:a[1]},distSq:i}:t}),{pt:{x:0,y:0},distSq:void 0});return void 0!==i.distSq&&(void 0===n.distSq||i.distSq<n.distSq)?i:n}(n,o)}),{pt:{x:0,y:0},distSq:void 0}).pt}var sn=l.useCallback((function(e){var t=(0,f.CreateGuid)();return O.current.set(t,e),t}),[]),cn=l.useCallback((function(e){O.current.delete(e)}),[]),un=l.useCallback((function(e,t){O.current.set(e,t)}),[]),fn=l.useCallback((function(t){"reset"===t?Qt():"download"===t?void 0!==e.onDataInspect&&e.onDataInspect(Q):"capture"===t?(ze(!0),void 0!==e.onCapture&&(U.current.captureID=e.onCapture(U.current.extraNeeded))):Ee(t)}),[Q,Qt,e.onDataInspect]),dn=l.useCallback((function(e){var t=function(t,n,o,a){if(a===u.AxisMap.get(n.axis)){var i=o(e);void 0!==i&&t.push(i)}return t};return le.map((function(e,n){var o=Math.min.apply(Math,i([],a(i([],a(j.current.values()),!1).reduce((function(e,o){return t(e,o,o.getMin,n)}),[])),!1)),r=Math.max.apply(Math,i([],a(i([],a(j.current.values()),!1).reduce((function(e,o){return t(e,o,o.getMax,n)}),[])),!1));return!isNaN(o)&&!isNaN(r)&&isFinite(o)&&isFinite(r)?[o,r]:le[n]}))}),[Z,le]);function hn(e){e[0]===Q[0]&&e[1]===Q[1]||(e[0]<e[1]?J(e):J([e[1],e[0]]))}function mn(e){jt((function(t,n,o){return(e[n][0]!==t[0]||e[n][1]!==t[1])&&(e[0]<e[1]?o[n]=e[n]:o[n]=[e[n][1],e[n][0]],!0)}))}return l.createElement(u.ContextWrapper,{XDomain:Q,MousePosition:Pe,MousePositionSnap:Ye,YDomain:le,CurrentMode:be,MouseIn:we,UpdateFlag:Mt,Data:j,DataGuid:Z,MassEnableCommand:Rt,XApplyPixelOffset:tn,YApplyPixelOffset:nn,XTransform:Jt,YTransform:en,XInvTransform:$t,YInvTransform:Kt,SetXDomain:hn,SetYDomain:mn,AddData:an,RemoveData:on,UpdateData:on,SetLegend:rn,RegisterSelect:sn,RemoveSelect:cn,UpdateSelect:un},l.createElement("div",{id:B,style:{height:e.height,width:e.width,position:"relative"}},l.createElement("div",{style:{height:kt,width:Nt,position:"absolute",cursor:Ie},onWheel:function(t){var n;if(be.includes("zoom")&&we){clearTimeout(W.current.timeout),W.current.stopScroll=!0,W.current.timeout=setTimeout((function(){W.current.stopScroll=!1}),200);var o=1.25;t.deltaY<0&&(o=.75);var a="AutoValue"===e.yDomain||"HalfAutoValue"===e.yDomain;if("zoom-horizontal"!==be){var i=Jt(Q[0]),r=Jt(Q[1]);if(Pe[0]<$e)r=o*(r-i)+i;else if(Pe[0]>Nt-Je)i=r-o*(r-i);else{var l=Pe[0];i=l-(l-i)*o,r=l+(r-l)*o}if(r-i>10){var c;if(c=null!==(n=e.limitZoom)&&void 0!==n&&n?[Math.max(mt[0],$t(i)),Math.min(mt[1],$t(r))]:[$t(i),$t(r)],"zoom-vertical"===be&&a){var u=dn(c);s.isEqual(u,le)||se(u)}J(c)}}"zoom-vertical"!==be&&(u=le.map((function(t,n,a){var i,r=en(t[0],n),l=en(t[1],n);if(Pe[1]<We)l=o*(l-r)+r;else if(Pe[1]>kt-je)r=l-o*(l-r);else{var s=Pe[1];r=s-(s-r)*o,l=s+(l-s)*o}return Math.abs(l-r)>10?null!==(i=e.limitZoom)&&void 0!==i&&i?[Math.max(gt[n][0],Kt(r,n)),Math.min(gt[n][1],Kt(l,n))]:[Kt(r,n),Kt(l,n)]:t})),s.isEqual(u,le)||se(u))}},onMouseMove:function(t){_e.current||requestAnimationFrame((function(){return function(t){var n;if(_e.current=!1,null!=z.current){var o=z.current.createSVGPoint();o.x=t.clientX,o.y=t.clientY;var a,i=o.matrixTransform(z.current.getScreenCTM().inverse());if("pan"===xe){var r=Pe[0]-i.x,l=Jt(Q[0]),s=Jt(Q[1]),c=$t(l+r),u=$t(s+r);(void 0===e.Tmin||c>e.Tmin)&&(void 0===e.Tmax||u<e.Tmax)&&J([c,u]),jt((function(t,n,o){var a=Kt(Pe[1],n)-Kt(i.y,n),r=F(e.Ymin,n),l=F(e.Ymax,n);return(void 0===r||t[0]+a>r)&&(void 0===l||t[1]+a<l)&&(o[n]=[t[0]+a,t[1]+a],!0)}))}ke([i.x,i.y]),a=null!==(n=e.snapMouse)&&void 0!==n&&n?ln(i):i,Ne([a.x,a.y]),O.current.size>0&&O.current.forEach((function(e){return void 0!==e.onMove?e.onMove($t(e.allowSnapping?a.x:i.x),Kt(e.allowSnapping?a.y:i.y,e.axis)):null}))}}(t)})),_e.current=!0},onMouseDown:function(t){var n,o,r,l;if(null!=z.current){var s=z.current.createSVGPoint();s.x=t.clientX,s.y=t.clientY;var c=s.matrixTransform(z.current.getScreenCTM().inverse());Le([c.x,c.y]);var f,d=null===(n=e.zoom)||void 0===n||n,h=null===(o=e.yZoom)||void 0===o||o,m=null===(r=e.xZoom)||void 0===r||r;"zoom-horizontal"===be&&h?Me("zoom-horizontal"):"zoom-vertical"===be&&m?Me("zoom-vertical"):"zoom-rectangular"===be&&d&&Me("zoom-rectangular"),"pan"!==be||void 0!==e.pan&&!e.pan||(Me("pan"),Re("grabbing")),f=null!==(l=e.snapMouse)&&void 0!==l&&l?ln(c):c,"select"===be&&void 0!==e.onSelect&&e.onSelect($t(f.x),i([],a(u.AxisMap.values()),!1).map((function(e){return Kt(f.y,e)})),{setTDomain:hn,setYDomain:mn}),O.current.size>0&&"select"===be&&O.current.forEach((function(e){return void 0!==e.onClick?e.onClick($t(e.allowSnapping?f.x:c.x),Kt(e.allowSnapping?f.y:c.y,e.axis)):null}))}},onMouseUp:function(){if("pan"!==be||void 0!==e.pan&&!e.pan||Re("grab"),xe.includes("zoom")){if(Math.abs(Pe[0]-Xe[0])<10&&Math.abs(Pe[1]-Xe[1])<10)return void Me("none");var t="AutoValue"===e.yDomain||"HalfAutoValue"===e.yDomain;if("zoom-horizontal"!==xe){var n=Math.min($t(Pe[0]),$t(Xe[0])),o=Math.max($t(Pe[0]),$t(Xe[0])),a=[Math.max(Q[0],n),Math.min(Q[1],o)];if("zoom-vertical"===be){var i=dn(a);!s.isEqual(i,le)&&t&&se(i)}J(a)}"zoom-vertical"!==xe&&(i=le.map((function(e,t,n){var o=Math.min(Kt(Pe[1],t),Kt(Xe[1],t)),a=Math.max(Kt(Pe[1],t),Kt(Xe[1],t));return[Math.max(e[0],o),Math.min(e[1],a)]})),s.isEqual(i,le)||se(i))}Me("none"),O.current.size>0&&"select"===be&&O.current.forEach((function(e){return void 0!==e.onRelease?e.onRelease($t(e.allowSnapping?Ye[0]:Pe[0]),Kt(e.allowSnapping?Ye[1]:Pe[1],e.axis)):null}))},onMouseLeave:function(e){Ce(!1),"pan"===xe&&Me("none"),O.current.size>0&&"select"===be&&O.current.forEach((function(e){return void 0!==e.onPlotLeave?e.onPlotLeave($t(e.allowSnapping?Ye[0]:Pe[0]),Kt(e.allowSnapping?Ye[1]:Pe[1],e.axis)):null}))},onMouseEnter:function(e){Ce(!0)}},l.createElement("svg",{ref:z,width:Nt<0?0:Nt,height:kt<0?0:kt,style:X,viewBox:"0 0 ".concat(Nt<0?0:Nt," ").concat(kt<0?0:kt)},void 0!==e.showBorder&&e.showBorder?l.createElement("path",{stroke:"currentColor",d:"M ".concat($e," ").concat(We," H ").concat(Nt-Je," V ").concat(kt-je," H ").concat($e," Z")}):null,"time"===e.XAxisType||void 0===e.XAxisType?l.createElement(h.default,{label:e.Tlabel,offsetBottom:je,offsetLeft:$e,offsetRight:Je,width:Nt,height:kt,setHeight:rt,heightAxis:it,showLeftMostTick:!ve[0],showRightMostTick:!ve[1],showDate:e.showDateOnTimeAxis}):"value"===e.XAxisType?l.createElement(A.default,{offsetBottom:je,offsetLeft:$e,offsetRight:Je,width:Nt,height:kt,setHeight:rt,heightAxis:it,label:e.Tlabel,showLeftMostTick:!ve[0],showRightMostTick:!ve[1]}):l.createElement(m.default,{offsetTop:We,showGrid:e.showGrid,label:e.Tlabel,offsetBottom:je,offsetLeft:$e,offsetRight:Je,width:Nt,height:kt,setHeight:rt,heightAxis:it,showLeftMostTick:!ve[0],showRightMostTick:!ve[1]}),null!==(_=e.hideYAxis)&&void 0!==_&&_?null:l.createElement(l.Fragment,null,ve[0]?l.createElement(p.default,{offsetRight:Je,showGrid:e.showGrid,label:F(e.Ylabel,0),offsetTop:We,offsetLeft:$e,offsetBottom:je,width:Nt,height:kt,setWidthAxis:ct,setHeightFactor:ot,axis:"left",hAxis:st,hFactor:nt,useFactor:void 0===e.useMetricFactors||e.useMetricFactors}):null,ve[1]?l.createElement(p.default,{offsetRight:Je,showGrid:e.showGrid,label:F(e.Ylabel,1),offsetTop:We,offsetLeft:$e,offsetBottom:je,width:Nt,height:kt,setWidthAxis:dt,setHeightFactor:ot,axis:"right",hAxis:ft,hFactor:nt,useFactor:void 0===e.useMetricFactors||e.useMetricFactors}):null),l.createElement("defs",null,l.createElement("clipPath",{id:"cp-"+B},l.createElement("path",{stroke:"none",fill:"none",d:" M ".concat($e,",").concat(We-5," H  ").concat(Nt-Je+5," V ").concat(kt-je," H ").concat($e," Z")}))),l.createElement("g",{clipPath:"url(#cp-"+B+")"},l.Children.map(e.children,(function(e){return!l.isValidElement(e)||e.type!==y.default&&e.type!==g.default&&e.type!==C.default&&e.type!==M.default&&e.type!==S.default&&e.type!==b.default&&e.type!==E.default&&e.type!==w.default&&e.type!==D.default&&e.type!==T.default&&e.type!==k.default&&e.type!==Y.default?null:e})),Ge||void 0!==e.showMouse&&("none"===e.showMouse||!1===e.showMouse)?null:l.createElement("path",{stroke:"currentColor",style:{strokeWidth:2,opacity:we?.8:0},d:"horizontal"!==e.showMouse?"M ".concat(Pe[0]," ").concat(We," V ").concat(kt-je):"M ".concat($e," ").concat(Pe[1]," H ").concat(Nt-Je)}),(zt||Ot||Wt)&&xe.includes("zoom")?l.createElement("rect",{fillOpacity:.8,fill:"currentColor",x:"zoom-horizontal"!==xe?Math.min(Xe[0],Pe[0]):$e,y:"zoom-vertical"!==xe?Math.min(Xe[1],Pe[1]):We,width:"zoom-horizontal"!==xe?Math.abs(Xe[0]-Pe[0]):Nt-$e-Je,height:"zoom-vertical"!==xe?Math.abs(Xe[1]-Pe[1]):kt-We-je}):null),Ge||"hide"===e.menuLocation?l.createElement(l.Fragment,null):l.createElement(c.default,{showPan:Ut,showZoom:zt,showHorizontalZoom:Ot,showVerticalZoom:Wt,showReset:Bt,showSelect:void 0!==e.onSelect||O.current.size>0,showDownload:void 0!==e.onDataInspect,showCapture:void 0!==e.onCapture,currentSelection:be,setSelection:fn,holdOpen:e.holdMenuOpen,heightAvaliable:kt-22,setWidth:Vt,x:"left"===e.menuLocation?14:Nt-14-Lt+20,y:22,"data-html2canvas-ignore":"true"},l.Children.map(e.children,(function(e){return l.isValidElement(e)&&e.type===x.default?e:null}))))),void 0!==e.legend&&"hidden"!==e.legend?l.createElement(v.default,{location:e.legend,height:Et,width:Gt,graphWidth:Nt,graphHeight:kt,RequestLegendWidth:Zt,RequestLegendHeight:qt,SendMassCommand:_t,HideDisabled:Ge}):null))}},23954:function(e,t,n){var o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(e){a={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var o,a=0,i=t.length;a<i;a++)!o&&a in t||(o||(o=Array.prototype.slice.call(t,0,a)),o[a]=t[a]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var i=n(6904),r=n(16463);t.default=function(e){var t=i.useRef(new Map),n=o(i.useState(0),2),l=n[0],s=n[1],c=i.useCallback((function(e,n){t.current.set(e,n);var i=Math.max.apply(Math,a([],o(t.current.values()),!1));s(i)}),[]),u=i.useCallback((function(e){t.current.delete(e),s((function(){var e=a([],o(t.current.values()),!1);return Math.max.apply(Math,a([],o(e),!1))}))}),[]),f=i.useMemo((function(){return{LegendWidth:l,RegisterLegendWidth:c,UnRegisterLegendWidth:u,HasConsumer:!0}}),[l]);return i.createElement(r.default.Provider,{value:f},e.children)}},16463:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var o=n(6904).createContext({HasConsumer:!1,LegendWidth:0,RegisterLegendWidth:function(){},UnRegisterLegendWidth:function(){}});t.default=o},70894:function(e,t,n){var o=n(78),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(e){a={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var o,a=0,i=t.length;a<i;a++)!o&&a in t||(o||(o=Array.prototype.slice.call(t,0,a)),o[a]=t[a]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.PointNode=void 0;var r=function(){function e(e,t){var n=this;if(this.minT=NaN,this.maxT=NaN,this.sum=[NaN],this.count=NaN,this.minV=[NaN],this.maxV=[NaN],this.children=null,this.points=null,this.dim=NaN,void 0!==t?this.maxCount=t:void 0===e||e.length<2e3?this.maxCount=2e3:(this.maxCount=e.length,o.warn("MaxTotalPoints was not provided to PointNode, adding new points will start removing the earliest points.")),void 0!==e){if(this.dim=0===e.length?NaN:e[0].length,0!==e.length&&e.some((function(e){return e.length!==n.dim})))throw new TypeError("Jagged data passed to PointNode. All points should all be ".concat(this.dim," dimensions."));this.initializeNode(e)}}return e.createNodeWithDesiredTreeSize=function(t,n){var o=new e;return o.dim=t.length,o.minT=t[0],o.maxT=t[0],o.count=1,o.sum=t.filter((function(e,t){return 0!=t})),o.minV=t.filter((function(e,t){return 0!=t})),o.maxV=t.filter((function(e,t){return 0!=t})),1===n?o.points=[t]:o.children=[e.createNodeWithDesiredTreeSize(t,n-1)],o},e.CreateCopy=function(t){var n=new e;return n.dim=t.dim,n.minT=t.minT,n.maxT=t.maxT,n.minV=i([],a(t.minV),!1),n.maxV=i([],a(t.maxV),!1),n.sum=i([],a(t.sum),!1),n.count=t.count,n.children=null!=t.children?i([],a(t.children),!1):null,n.points=null!=t.points?i([],a(t.points),!1):null,n},e.prototype.initializeNode=function(t){t.length<=20?(this.points=i([],a(t),!1),this.children=null):this.children=e.splitPoints(t),this.RecalculateStats()},e.prototype.AddPoint=function(t){if(Number.isNaN(this.dim)&&(this.dim=t.length),0===t.length)throw new Error("No point to add");if(t.length!==this.dim)throw new TypeError("Jagged data passed to PointNode.Add(). Points should be ".concat(this.dim," dimension."));if(this.TryAddPoints(t))this.count>this.maxCount&&this.removeLeftMostPoint();else{var n=e.CreateCopy(this);this.children=[n,e.createNodeWithDesiredTreeSize(t,this.GetTreeSize())],this.points=null,this.RecalculateStats(),this.count>this.maxCount&&this.removeLeftMostPoint()}},e.prototype.TryAddPoints=function(t){var n=this.GetTreeSize();if(n>1&&null!==this.children){var o=this.children[this.children.length-1].TryAddPoints(t);if(!o&&this.children.length<20){var r=e.createNodeWithDesiredTreeSize(i([],a(t),!1),n-1);return this.children.push(r),this.IncrementStatsForNewChild(r),!0}return o&&this.RecalculateStats(),o}return this.points.length<20&&(this.points.push(t),this.IncrementStatsForNewPoint(t),!0)},e.splitPoints=function(t){for(var n=1;Math.pow(20,n)<t.length;)n++;for(var o=Math.pow(20,n-1),a=[],i=0;i<t.length;)a.push(new e(t.slice(i,i+o))),i+=o;return a},e.prototype.removeLeftMostPoint=function(){null!==this.points?this.points.length>0&&this.points.shift():null!==this.children&&this.children.length>0&&(this.children[0].removeLeftMostPoint(),0===this.children[0].count&&this.children.shift()),this.RecalculateStats()},e.prototype.RecalculateStats=function(){null!==this.points?this.CalculatePointStats():null!==this.children&&this.AggregateChildStats()},e.prototype.CalculatePointStats=function(){var e,t,n,o,r,l,s,c,u;if(null!==this.points){if(0===this.points.length)return this.count=0,this.minT=NaN,this.maxT=NaN,this.dim=NaN,this.minV=[],this.maxV=[],void(this.sum=[]);this.count=this.points.length,this.minT=null!==(n=null===(t=null===(e=this.points)||void 0===e?void 0:e[0])||void 0===t?void 0:t[0])&&void 0!==n?n:NaN,this.maxT=null!==(l=null===(r=null===(o=this.points)||void 0===o?void 0:o[this.points.length-1])||void 0===r?void 0:r[0])&&void 0!==l?l:NaN,this.dim=null!==(u=null===(c=null===(s=this.points)||void 0===s?void 0:s[0])||void 0===c?void 0:c.length)&&void 0!==u?u:NaN;for(var f=function(e){var t=d.points.map((function(t){return t[e]}));d.minV[e-1]=Math.min.apply(Math,i([],a(t),!1)),d.maxV[e-1]=Math.max.apply(Math,i([],a(t),!1)),d.sum[e-1]=t.reduce((function(e,t){return e+t}),0)},d=this,h=1;h<this.dim;h++)f(h)}},e.prototype.AggregateChildStats=function(){if(null!==this.children&&0!==this.children.length){this.minT=Math.min.apply(Math,i([],a(this.children.map((function(e){return e.minT}))),!1)),this.maxT=Math.max.apply(Math,i([],a(this.children.map((function(e){return e.maxT}))),!1));for(var e=function(e){t.minV[e]=Math.min.apply(Math,i([],a(t.children.map((function(t){return t.minV[e]}))),!1)),t.maxV[e]=Math.max.apply(Math,i([],a(t.children.map((function(t){return t.maxV[e]}))),!1)),t.sum[e]=t.children.reduce((function(t,n){return t+n.sum[e]}),0)},t=this,n=0;n<this.dim-1;n++)e(n);this.count=this.children.reduce((function(e,t){return e+t.count}),0)}},e.prototype.IncrementStatsForNewChild=function(e){this.minT=Math.min(this.minT,e.minT),this.maxT=Math.max(this.maxT,e.maxT);for(var t=0;t<this.dim-1;t++)this.minV[t]=Math.min(this.minV[t],e.minV[t]),this.maxV[t]=Math.max(this.maxV[t],e.maxV[t]),this.sum[t]+=e.sum[t];this.count+=e.count},e.prototype.IncrementStatsForNewPoint=function(e){isNaN(this.count)&&(this.count=0),isNaN(this.minT)&&(this.minT=e[0]),isNaN(this.maxT)&&(this.maxT=e[0]),this.count+=1,this.minT=Math.min(this.minT,e[0]),this.maxT=Math.max(this.maxT,e[0]);for(var t=0;t<this.dim-1;t++){isNaN(this.sum[t])&&(this.sum[t]=0),isNaN(this.minV[t])&&(this.minV[t]=e[t+1]),isNaN(this.maxV[t])&&(this.maxV[t]=e[t+1]);var n=e[t+1];null!==this.points&&1===this.points.length?(this.minV[t]=n,this.maxV[t]=n,this.sum[t]+=n):(this.minV[t]=Math.min(this.minV[t],n),this.maxV[t]=Math.max(this.maxV[t],n),this.sum[t]+=n)}},e.prototype.GetData=function(e,t,n){var o=this;if(null!=this.points&&e<=this.minT&&t>=this.maxT)return this.points;if(null!=this.points&&void 0!==n&&n)return this.points.filter((function(n,a){var i,r;return n[0]>=e&&n[0]<=t||a<(null!==(r=null===(i=o.points)||void 0===i?void 0:i.length)&&void 0!==r?r:0)-1&&(null!=o.points?o.points[a+1][0]:0)>=e||a>0&&(null!=o.points?o.points[a-1][0]:0)<=t}));if(null!=this.points)return this.points.filter((function(n){return n[0]>=e&&n[0]<=t}));var r=[];return r.concat.apply(r,i([],a(this.children.filter((function(n){return n.minT<=e&&n.maxT>e||n.maxT>=t&&n.minT<t||n.minT>=e&&n.maxT<=t})).map((function(o){return o.GetData(e,t,n)}))),!1))},e.prototype.GetFullData=function(){return this.GetData(this.minT,this.maxT)},e.prototype.GetCount=function(e,t){return null!==this.points?e<=this.minT&&t>=this.maxT?this.count:this.points.reduce((function(n,o){return n+(o[0]>=e&&o[0]<=t?1:0)}),0):null!==this.children?this.children.reduce((function(n,o){return n+(o.minT<=t&&o.maxT>=e?o.GetCount(e,t):0)}),0):0},e.prototype.GetAllLimits=function(e,t){for(var n=Array(this.dim-1),o=0;o<this.dim-1;o++)n[o]=this.GetLimits(e,t,o);return n},e.prototype.GetLimits=function(e,t,n){var o=null!=n?n:0,r=this.maxV[o],l=this.minV[o];if(null==this.points&&!(e<=this.minT&&t>this.maxT)){var s=this.children.filter((function(n){return n.maxT>e&&n.minT<t})).map((function(n){return n.GetLimits(e,t,o)}));l=Math.min.apply(Math,i([],a(s.map((function(e){return e[0]}))),!1)),r=Math.max.apply(Math,i([],a(s.map((function(e){return e[1]}))),!1))}return null==this.points||e<=this.minT&&t>this.maxT||(s=this.points.filter((function(n){return n[0]>e&&n[0]<t})).map((function(e){return e[o+1]})),l=Math.min.apply(Math,i([],a(s),!1)),r=Math.max.apply(Math,i([],a(s),!1))),[l,r]},e.prototype.GetPoint=function(e){return this.PointBinarySearch(e,1)[0]},e.prototype.GetPoints=function(e,t){return void 0===t&&(t=1),this.PointBinarySearch(e,t)},e.prototype.PointBinarySearch=function(e,t,n,o){if(void 0===t&&(t=1),t<=0)throw new RangeError("Requested number of points must be positive value.");if(null!==this.points){if(0===this.points.length)return[[NaN]];if(e<this.minT){var a=(i=t-this.points.length)>0&&void 0!==o?o.PointBinarySearch(e,i,this,void 0):[];return this.points.slice(0,t).concat(a)}var i;if(e>this.maxT)return(a=(i=t-this.points.length)>0&&void 0!==n?n.PointBinarySearch(e,i,void 0,this):[]).concat(this.points.slice(-t));for(var r=this.points.length-1,l=0,s=this.minT,c=this.maxT;c!==e&&s!==e&&r!==l&&c!==s;){var u=Math.round((r+l)/2),f=this.points[u][0];if(u===r||u===l)break;f<=e&&(l=u),f>e&&(r=u),c=this.points[r][0],s=this.points[l][0]}var d=Math.floor(t/2),h=d,m=t%2==0?1:0,p=void 0;Math.abs(e-s)<Math.abs(e-c)?(p=l,h-=m):(p=r,d-=m);var v=p+d+1-this.points.length,g=v>0&&void 0!==o?o.PointBinarySearch(e,v,this,void 0):[],y=h-p;return(y>0&&void 0!==n?n.PointBinarySearch(e,y,void 0,this):[]).concat(this.points.slice(Math.max(p-h,0),Math.min(p+d+1,this.points.length))).concat(g)}if(null!==this.children){var x=-1;if(e<this.minT)x=0;else if(e>this.maxT)x=this.children.length-1;else if((x=this.children.findIndex((function(t){return t.maxT>=e})))>0&&this.children[x].minT>e){var M=this.children[x].minT,S=this.children[x-1].maxT;Math.abs(e-S)<Math.abs(e-M)&&x--}if(-1===x)throw new RangeError("Could not find child node with point that has a time value of ".concat(e));var b=x!==this.children.length-1?this.children[x+1]:void 0,E=0!==x?this.children[x-1]:void 0;return this.children[x].PointBinarySearch(e,t,E,b)}throw new RangeError("Both children and points are null for PointNode, unable to find point with time value of ".concat(e))},e.prototype.GetTreeSize=function(){return null==this.children?1:1+Math.max.apply(Math,i([],a(this.children.map((function(e){return e.GetTreeSize()}))),!1))},e}();t.PointNode=r},86790:function(e,t,n){var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},o.apply(this,arguments)},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(e){a={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(t,"__esModule",{value:!0});var i=n(6904),r=n(84512),l=i.forwardRef((function(e,t){var n=a(i.useState(0),2),l=n[0],s=n[1];return i.useEffect((function(){var t=setInterval((function(){null!=e.RerenderCallback?e.RerenderCallback()&&s((function(e){return e+1})):s((function(e){return e+1}))}),1e3*e.Interval);return function(){return clearInterval(t)}}),[e.Interval,e.RerenderCallback]),i.createElement(r.InternalLine,o({},e,{ref:t,reRender:l}))}));t.default=l},57060:function(e,t,n){var o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(e){a={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(t,"__esModule",{value:!0});var a=n(6904),i=n(84917),r=function(e){var t,n,o,r,l=a.useContext(i.GraphContext),s=null!==(n=null===(t=e.inPixels)||void 0===t?void 0:t.x)&&void 0!==n&&n?l.XApplyPixelOffset(e.x):l.XTransformation(e.x),c=null!==(r=null===(o=e.inPixels)||void 0===o?void 0:o.y)&&void 0!==r&&r?l.YApplyPixelOffset(e.y):l.YTransformation(e.y,e.a);return a.createElement("foreignObject",{style:e.style,x:s-e.r,y:c-e.r,width:2*e.r,height:2*e.r},e.children)};t.default=function(e){var t=a.useContext(i.GraphContext),n=o(a.useState({x:e.xPos,y:e.yPos}),2),l=n[0],s=n[1],c=o(a.useState(!1),2),u=c[0],f=c[1],d=o(a.useState(""),2),h=d[0],m=d[1],p=a.useCallback((function(n,o){var a,r,l,s,c=null!==(r=null===(a=e.usePixelPositioning)||void 0===a?void 0:a.x)&&void 0!==r&&r?t.XApplyPixelOffset(e.xPos):t.XTransformation(e.xPos),u=t.XTransformation(n),f=null!==(s=null===(l=e.usePixelPositioning)||void 0===l?void 0:l.y)&&void 0!==s&&s?t.YApplyPixelOffset(e.yPos):t.YTransformation(e.yPos,i.AxisMap.get(e.axis)),d=t.YTransformation(o,i.AxisMap.get(e.axis));return u<=c+e.radius&&u>=c-e.radius&&d<=f+e.radius&&d>=f-e.radius}),[e.axis,e.yPos,e.yPos,e.radius,i.AxisMap,e.usePixelPositioning,t.XTransformation,t.YTransformation,t.XApplyPixelOffset,t.YApplyPixelOffset]),v=a.useCallback((function(e,t){p(e,t)&&f(!0)}),[f,p]),g=a.useCallback((function(t,n){void 0!==e.onHover&&p(t,n)&&e.onHover()}),[e.onHover,p]);return a.useEffect((function(){var n=t.RegisterSelect({onRelease:function(){return f(!1)},onPlotLeave:function(){return f(!1)},onClick:v,onMove:g,axis:e.axis,allowSnapping:!1});return m(n),function(){t.RemoveSelect(n)}}),[]),a.useEffect((function(){""!==h&&t.UpdateSelect(h,{onRelease:function(){return f(!1)},onPlotLeave:function(){return f(!1)},onClick:v,onMove:g,axis:e.axis,allowSnapping:!1})}),[v,g]),a.useEffect((function(){s({x:e.xPos,y:e.yPos})}),[e.xPos,e.yPos]),a.useEffect((function(){void 0!==e.setPosition&&(u||e.xPos===l.x&&e.yPos===l.y||e.setPosition(l.x,l.y))}),[u,l]),a.useEffect((function(){"select"!==t.CurrentMode&&f(!1)}),[t.CurrentMode]),a.useEffect((function(){u&&s({x:t.XHoverSnap,y:t.YHoverSnap[i.AxisMap.get(e.axis)]})}),[t.XHoverSnap,t.YHoverSnap]),a.createElement(a.Fragment,null,a.createElement(r,{style:e.style,x:e.xPos,y:e.yPos,r:e.radius,a:i.AxisMap.get(e.axis),inPixels:e.usePixelPositioning},e.children),void 0===e.setPosition||e.xPos===l.x&&e.yPos===l.y?null:a.createElement(r,{style:e.style,x:l.x,y:l.y,r:e.radius,a:i.AxisMap.get(e.axis),inPixels:e.usePixelPositioning},e.children))}},79474:function(e,t,n){var o=n(78),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(e){a={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var o,a=0,i=t.length;a<i;a++)!o&&a in t||(o||(o=Array.prototype.slice.call(t,0,a)),o[a]=t[a]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var r=n(6904),l=n(84917),s=n(32098),c=n(24334),u=n(51935),f=36e5,d=31536e6;function h(e,t){return s.utc(e).format(t)}t.default=r.memo((function(e){var t,n,m,p,v=r.useContext(l.GraphContext),g=a(r.useState([]),2),y=g[0],x=g[1],M=a(r.useState(1),2),S=M[0],b=M[1],E=a(r.useState(0),2),T=E[0],w=E[1],C=a(r.useState("YYYY"),2),D=C[0],P=C[1],k=a(r.useState(""),2),A=k[0],Y=k[1],N=a(r.useState("Time"),2),H=N[0],X=N[1];function L(e){e.milliseconds(Math.floor(e.millisecond()))}function V(e){L(e),e.milliseconds(0)}function I(e){V(e),e.seconds(0)}function R(e){I(e),e.minutes(0)}function _(e){R(e),e.hours(0)}function F(e){_(e),e.weekday(0)}function G(e){_(e),e.date(1)}function z(e){_(e),e.dayOfYear(0)}return r.useEffect((function(){if(void 0!==e.label){var t="",n="";switch(D){case"SSS":t="MMM Do, YYYY HH:mm:ss",n=" (ms)";break;case"ss.SS":t="MMM Do, YYYY HH:mm",n=" (sec.ms)";break;case"ss":t="MMM Do, YYYY HH:mm",n=" (sec)";break;case"mm:ss":t="MMM Do, YYYY HH",n=" (min:sec)";break;case"mm":t="MMM Do, YYYY HH",n=" (min)";break;case"HH:mm":t="MMM Do, YYYY",n=" (hour:min)";break;case"HH":t="MMM Do, YYYY",n=" (hour)";break;case"DD HH":t="MMM YYYY",n=" (day hour)";break;case"MM/DD":t="YYYY",n=" (month/day)";break;case"MM YY":t="",n=" (month year)";break;case"YYYY":t="",n=" (year)";break;default:o.warn("Unrecognized format: ".concat(D))}if(""===e.label){var a=""===t?"Time":h(y[0],t);X(a+n)}else X(e.label+n)}else X(void 0)}),[D,e.label,y]),r.useEffect((function(){var e=Math.max.apply(Math,i([],a(y.map((function(e){return(0,c.GetTextHeight)("Segoe UI","1em",h(e,D))}))),!1));e=(isFinite(e)?e:0)+12,w(e)}),[y,D]),r.useEffect((function(){var t=void 0!==H?(0,c.GetTextHeight)("Segoe UI","1em",H):0;T+t!==e.heightAxis&&e.setHeight(T+t)}),[T,H,e.heightAxis,e.setHeight]),r.useEffect((function(){var t,n=v.XDomain[1]-v.XDomain[0];if(0!==n){var o="YYYY",a="";n<47304e7&&n>=d&&(o="MM YY",a=""),n<d&&n>=2592e6&&(o="MM/DD",a="YY"),n<2592e6&&n>=1728e5&&(o="DD HH",a="YY"),n<1728e5&&n>=108e6&&(o="HH",a="MM/DD"),n<108e6&&n>=f&&(o="HH:mm",a="MM/DD"),n<f&&n>=18e5&&(o="mm",a="MM/DD HH"),n<18e5&&n>=6e4&&(o="mm:ss",a="MM/DD HH"),n<6e4&&n>=3e4&&(o="ss",a="MM/DD HH:mm"),n<3e4&&n>=1e3&&(o="ss.SS",a="MM/DD HH:mm"),n<1e3&&(o="SSS",a="MM/DD HH:mm:ss");var i=s.utc(v.XDomain[0]),r=s.utc(v.XDomain[1]),l=s.duration(s.utc(v.XDomain[1]).diff(s.utc(v.XDomain[0]))),c=(0,u.cloneDeep)(i),h=10,m="y";l.asYears()>=70&&(h=10,m="y",z(c),c.year(10*Math.floor(c.year()/10))),l.asYears()<70&&l.asYears()>=40&&(h=5,z(c),c.year(5*Math.floor(c.year()/5))),l.asYears()<40&&l.asYears()>=15&&(h=2,z(c),c.year(2*Math.floor(c.year()/2))),l.asYears()<15&&l.asYears()>=6&&(m="M",h=12,z(c)),l.asYears()<6&&l.asYears()>=4&&(m="M",h=6,G(c),c.month(6*Math.floor(c.month()/6))),l.asYears()<4&&l.asYears()>=1.5&&(m="M",h=3,G(c),c.month(3*Math.floor(c.month()/3))),l.asYears()<1.5&&l.asMonths()>=6&&(m="M",h=1,G(c)),l.asMonths()<6&&l.asMonths()>=2&&(m="w",h=2,F(c)),l.asMonths()<2&&l.asMonths()>=1&&(m="w",h=1,F(c)),l.asMonths()<1&&l.asDays()>=16&&(m="d",h=2,_(c)),l.asDays()<16&&l.asDays()>=10&&(m="d",h=1,_(c)),l.asDays()<10&&l.asDays()>=3&&(m="h",h=12,R(c),c.hours(12*Math.floor(c.hours()/12))),l.asDays()<3&&l.asHours()>=30&&(m="h",h=6,R(c),c.hours(6*Math.floor(c.hours()/6))),l.asHours()<30&&l.asHours()>=18&&(m="h",h=3,R(c),c.hours(3*Math.floor(c.hours()/3))),l.asHours()<18&&l.asHours()>=6&&(m="h",h=1,R(c)),l.asHours()<6&&l.asHours()>=3&&(m="m",h=30,I(c),c.minutes(30*Math.floor(c.minutes()/30))),l.asHours()<3&&l.asHours()>=1&&(m="m",h=15,I(c),c.minutes(15*Math.floor(c.minutes()/15))),l.asHours()<1&&l.asMinutes()>=20&&(m="m",h=5,I(c),c.minutes(5*Math.floor(c.minutes()/5))),l.asMinutes()<20&&l.asMinutes()>=10&&(m="m",h=2,I(c),c.minutes(2*Math.floor(c.minutes()/2))),l.asMinutes()<10&&l.asMinutes()>=5&&(m="m",h=1,I(c)),l.asMinutes()<5&&l.asMinutes()>=2&&(m="s",h=30,V(c),c.second(30*Math.floor(c.second()/30))),l.asMinutes()<2&&l.asMinutes()>=1&&(m="s",h=15,V(c),c.second(15*Math.floor(c.second()/15))),l.asMinutes()<1&&l.asSeconds()>=30&&(m="s",h=5,V(c),c.second(5*Math.floor(c.second()/5))),l.asSeconds()<30&&l.asSeconds()>=15&&(m="s",h=2,V(c)),l.asSeconds()<15&&l.asSeconds()>=5&&(m="s",h=1,V(c)),l.asSeconds()<5&&l.asSeconds()>=2&&(m="ms",h=500,L(c),c.millisecond(500*Math.floor(c.millisecond()/500))),l.asSeconds()<2&&l.asSeconds()>=1&&(m="ms",h=250,L(c),c.millisecond(250*Math.floor(c.millisecond()/250))),l.asSeconds()<1&&l.asMilliseconds()>=500&&(m="ms",h=100,L(c),c.millisecond(100*Math.floor(c.millisecond()/100))),l.asMilliseconds()<500&&l.asMilliseconds()>=100&&(m="ms",h=50,L(c),c.millisecond(50*Math.floor(c.millisecond()/50))),l.asMilliseconds()<100&&l.asMilliseconds()>=20&&(m="ms",h=10,L(c),c.millisecond(10*Math.floor(c.millisecond()/10))),l.asMilliseconds()<20&&(m="ms",L(c),h=1);for(var p=[c.add(h,m)];p[p.length-1]<r;)p.push(p[p.length-1].clone().add(h,m));p.pop(),x(p.map((function(e){return e.valueOf()}))),P(o),null!==(t=e.showDate)&&void 0!==t&&t?Y(a):Y("")}}),[v.XDomain,e.showDate]),r.useEffect((function(){if(0!==y.length){for(var t=h(y[0],D),n=(e.width-e.offsetLeft-e.offsetRight-10)/y.length,o=1,a=(0,c.GetTextWidth)("Segoe UI",o+"em",t);a>n&&o>.5;)o-=.05,a=(0,c.GetTextWidth)("Segoe UI",o+"em",t);b(o)}}),[y,e.width,e.offsetLeft,e.offsetRight,D]),r.createElement("g",null,r.createElement("path",{stroke:"currentColor",style:{strokeWidth:1},d:"M ".concat(e.offsetLeft-(null===(t=e.showLeftMostTick)||void 0===t||t?0:8)," ").concat(e.height-e.offsetBottom," H ").concat(e.width-e.offsetRight+(null===(n=e.showRightMostTick)||void 0===n||n?0:8))}),null===(m=e.showLeftMostTick)||void 0===m||m?r.createElement("path",{stroke:"currentColor",style:{strokeWidth:1},d:"M ".concat(e.offsetLeft," ").concat(e.height-e.offsetBottom," v ").concat(8)}):null,null===(p=e.showRightMostTick)||void 0===p||p?r.createElement("path",{stroke:"currentColor",style:{strokeWidth:1},d:"M ".concat(e.width-e.offsetRight," ").concat(e.height-e.offsetBottom," v ").concat(8)}):null,void 0===e.showTicks||e.showTicks?r.createElement(r.Fragment,null,y.map((function(t,n){return r.createElement("path",{key:n,stroke:"currentColor",style:{strokeWidth:1,transition:"d 0.5s"},d:"M ".concat(v.XTransformation(t)," ").concat(e.height-e.offsetBottom+6," v ").concat(-6)})})),y.map((function(t,n){return r.createElement("text",{fill:"currentColor",key:n,fontSize:"".concat(S,"em"),style:{textAnchor:"middle",dominantBaseline:"hanging",transition:"x 0.5s, y 0.5s"},y:e.height-e.offsetBottom+8,x:v.XTransformation(t)},h(t,D))}))):null,void 0!==H?r.createElement("text",{fill:"currentColor",style:{fontSize:"1em",textAnchor:"middle",dominantBaseline:"middle"},x:e.offsetLeft+(e.width-e.offsetLeft-e.offsetRight)/2,y:e.height-e.offsetBottom+T},H):null,""!==A&&y.length>0?r.createElement("text",{fill:"currentColor",style:{fontSize:"1em",textAnchor:"end",dominantBaseline:"middle"},x:e.width-e.offsetRight,y:e.height-e.offsetBottom+T},h(y[0],A)):null)}))},64462:function(e,t,n){var o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(e){a={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r};Object.defineProperty(t,"__esModule",{value:!0});var a=n(6904),i=n(84917);t.default=function(e){var t=a.useContext(i.GraphContext),n=o(a.useState(e.Value),2),r=n[0],l=n[1],s=o(a.useState(!1),2),c=s[0],u=s[1],f=o(a.useState(""),2),d=f[0],h=f[1];function m(n){var o=i.AxisMap.get(e.axis),a=void 0===e.start?t.YDomain[o][0]:e.start,r=void 0===e.end?t.YDomain[o][1]:e.end;return"M ".concat(t.XTransformation(n)," ").concat(t.YTransformation(a,o)," L ").concat(t.XTransformation(n)," ").concat(t.YTransformation(r,o))}var p=a.useCallback((function(n,o){var a=t.XTransformation(e.Value),i=t.XTransformation(n);i<=a+e.width/2&&i>=a-e.width/2&&u(!0)}),[e.width,e.Value,t.XTransformation]);return a.useEffect((function(){var n=t.RegisterSelect({onClick:p,onRelease:function(e){return u(!1)},onPlotLeave:function(e){return u(!1)},axis:e.axis,allowSnapping:!1});return h(n),function(){t.RemoveSelect(n)}}),[]),a.useEffect((function(){""!==d&&t.UpdateSelect(d,{onClick:p,onRelease:function(e){return u(!1)},onPlotLeave:function(e){return u(!1)},axis:e.axis,allowSnapping:!1})}),[p]),a.useEffect((function(){l(e.Value)}),[e.Value]),a.useEffect((function(){c&&void 0!==e.setValue&&e.Value!==r&&e.setValue(r)}),[c,r]),a.useEffect((function(){c&&void 0!==e.onClick&&e.onClick(e.Value)}),[c]),a.useEffect((function(){"select"!==t.CurrentMode&&u(!1)}),[t.CurrentMode]),a.useEffect((function(){c&&l(t.XHoverSnap)}),[t.XHoverSnap]),a.createElement("g",null,a.createElement("path",{d:m(e.Value),style:{fill:"none",strokeWidth:e.width,stroke:e.color},strokeDasharray:i.LineMap.get(e.lineStyle)}),void 0!==e.setValue&&e.Value!==r&&c?a.createElement("path",{d:m(r),style:{fill:"none",strokeWidth:e.width,stroke:e.color,opacity:.5},strokeDasharray:i.LineMap.get(e.lineStyle)}):null)}},95978:function(e,t,n){var o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(e){a={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var o,a=0,i=t.length;a<i;a++)!o&&a in t||(o||(o=Array.prototype.slice.call(t,0,a)),o[a]=t[a]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var i=n(6904),r=n(84917),l=n(24334),s=function(e,t){return e.toFixed(t)};t.default=i.memo((function(e){var t,n,c,u,f=i.useContext(r.GraphContext),d=o(i.useState([]),2),h=d[0],m=d[1],p=o(i.useState(0),2),v=p[0],g=p[1],y=o(i.useState(0),2),x=y[0],M=y[1],S=o(i.useState(e.label),2),b=S[0],E=S[1],T=o(i.useState(0),2),w=T[0],C=T[1];return i.useEffect((function(){g(null!=b?(0,l.GetTextHeight)("Segoe UI","1em",b):0)}),[b]),i.useEffect((function(){var t;E(null!==(t=e.label)&&void 0!==t?t:"")}),[e.label]),i.useEffect((function(){if(0!=f.XDomain[1]-f.XDomain[0]){for(var e=function(e,t){var n=(t-e)/7,o=Math.floor(Math.log10(n)),a=n/Math.pow(10,o),i=(a<=1?1:a<=2?2:a<=5?5:10)*Math.pow(10,o);return{tickInterval:i,decimalPlaces:Math.max(0,-Math.floor(Math.log10(i)))}}(f.XDomain[0],f.XDomain[1]),t=e.tickInterval,n=e.decimalPlaces,o=Math.ceil(f.XDomain[0]/t)*t,a=f.XDomain[1],i=[],r=o;r<=a;r+=t)i.push(r);m(i),C(n)}}),[f.XDomain]),i.useEffect((function(){var e=Math.max.apply(Math,a([],o(h.map((function(e){return(0,l.GetTextHeight)("Segoe UI","1em",s(e,w))}))),!1)),t=(isFinite(e)?e:0)+12;M(t)}),[h,w]),i.useEffect((function(){x+v!==e.heightAxis&&e.setHeight(x+v)}),[x,v,e.heightAxis]),i.createElement("g",null,i.createElement("path",{stroke:"currentColor",style:{strokeWidth:1},d:"M ".concat(e.offsetLeft-(null===(t=e.showLeftMostTick)||void 0===t||t?0:8)," ").concat(e.height-e.offsetBottom," H ").concat(e.width-e.offsetRight+(null===(n=e.showRightMostTick)||void 0===n||n?0:8))}),null===(c=e.showLeftMostTick)||void 0===c||c?i.createElement("path",{stroke:"currentColor",style:{strokeWidth:1},d:"M ".concat(e.offsetLeft," ").concat(e.height-e.offsetBottom," v 8")}):null,null===(u=e.showRightMostTick)||void 0===u||u?i.createElement("path",{stroke:"currentColor",style:{strokeWidth:1},d:"M ".concat(e.width-e.offsetRight," ").concat(e.height-e.offsetBottom," v 8")}):null,i.createElement(i.Fragment,null,h.map((function(t,n){return i.createElement("path",{key:n,stroke:"currentColor",style:{strokeWidth:1,transition:"d 0.5s"},d:"M ".concat(f.XTransformation(t)," ").concat(e.height-e.offsetBottom+6," v -6")})})),h.map((function(t,n){return i.createElement("text",{fill:"currentColor",key:n,style:{fontSize:"1em",textAnchor:"middle",dominantBaseline:"hanging",transition:"x 0.5s, y 0.5s"},y:e.height-e.offsetBottom+8,x:f.XTransformation(t)},s(t,w))}))),null!=b?i.createElement("text",{fill:"currentColor",style:{fontSize:"1em",textAnchor:"middle",dominantBaseline:"middle"},x:e.offsetLeft+(e.width-e.offsetLeft-e.offsetRight)/2,y:e.height-e.offsetBottom+x},b):null)}))},81823:function(e,t,n){var o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(e){a={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var o,a=0,i=t.length;a<i;a++)!o&&a in t||(o||(o=Array.prototype.slice.call(t,0,a)),o[a]=t[a]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var i=n(6904),r=n(84917),l=n(24334);t.default=i.memo((function(e){var t=i.useContext(r.GraphContext),n=o(i.useState([]),2),s=n[0],c=n[1],u=o(i.useState(1),2),f=u[0],d=u[1],h=o(i.useState(0),2),m=h[0],p=h[1],v=o(i.useState(1),2),g=v[0],y=v[1],x=o(i.useState(0),2),M=x[0],S=x[1],b=o(i.useState(1),2),E=b[0],T=b[1],w=o(i.useState(1),2),C=w[0],D=w[1];i.useEffect((function(){var n=r.AxisMap.get(e.axis),o=t.YDomain[n][1]-t.YDomain[n][0];if(isFinite(o)&&!isNaN(o)){var a;if(0===o)a=[t.YDomain[n][0]];else{for(var i=0;o*Math.pow(10,i)<1;)i+=1;for(;o*Math.pow(10,i)>10;)i-=1;var l=1/Math.pow(10,i);for(o*Math.pow(10,i)<6&&o*Math.pow(10,i)>=2.5&&(l=.5/Math.pow(10,i)),o*Math.pow(10,i)<2.5&&o*Math.pow(10,i)>=1.2&&(l=.2/Math.pow(10,i)),o*Math.pow(10,i)<1.2&&(l=.1/Math.pow(10,i)),a=[Math.floor(t.YDomain[n][0]/l)*l+l];a[a.length-1]<t.YDomain[n][1]-l;)a.push(a[a.length-1]+l)}c(a)}else c([])}),[t.YDomain,e.useFactor,e.axis,e.height]),i.useEffect((function(){if(0!==s.length){for(var t=(s[0]*C).toFixed(E),n=e.height/s.length,o=1,a=(0,l.GetTextHeight)("Segoe UI",o+"em",t);a>n&&o>.5;)o-=.05,a=(0,l.GetTextHeight)("Segoe UI",o+"em",t);d(o)}}),[s,C,E,e.height]),i.useEffect((function(){if(e.useFactor){for(var n=r.AxisMap.get(e.axis),o=t.YDomain[n][1]-t.YDomain[n][0],a=0,i=Math.max(Math.abs(t.YDomain[n][0]),Math.abs(t.YDomain[n][1]));i*Math.pow(10,a)<1;)a+=1;for(;i*Math.pow(10,a)>10;)a-=1;a=Math.sign(a)*Math.floor(Math.abs(a)/3)*3,o*Math.pow(10,a)<.1&&0!==o&&(a+=3),D(Math.pow(10,a))}else D(1)}),[t.YDomain,e.useFactor,e.axis]),i.useEffect((function(){var n=r.AxisMap.get(e.axis),o=t.YDomain[n][1]-t.YDomain[n][0];0==(o*=C)&&(o=Math.abs(t.YDomain[n][0]*C)),o>=15&&T(0),o<15&&o>=1.5&&T(1),o<1.5&&o>=.15&&T(2),o<.15&&T(3),o<.015&&T(4),o<.0015&&T(5),0===o&&T(2)}),[C,t.YDomain,e.axis]),i.useEffect((function(){var t=0;1!==C&&(t=(0,l.GetTextHeight)("Segoe UI","1em","x"+(1/C).toString())),t!==e.hFactor&&e.setHeightFactor(t)}),[C,e.hFactor,e.setHeightFactor]),i.useEffect((function(){if(void 0!==e.label){var t=(0,l.GetTextHeight)("Segoe UI",g+"em",e.label)+4;p(t)}else p(0)}),[e.label,e.height,e.offsetTop,e.offsetBottom,g]),i.useEffect((function(){var e=Math.max.apply(Math,a([],o(s.map((function(e){return(0,l.GetTextWidth)("Segoe UI","1em",(e*C).toFixed(E))}))),!1));(e=(isFinite(e)?e:0)+8)!==M&&S(e)}),[s,E]),i.useEffect((function(){e.hAxis!==M+m&&e.setWidthAxis(M+m)}),[M,m,e.hAxis]),i.useEffect((function(){return function(){return e.setWidthAxis(0)}}),[]),i.useEffect((function(){if(void 0!==e.label){for(var t=(0,l.GetTextWidth)("Segoe UI","1em",e.label),n=1;t>e.height&&n>.1;)n-=.1,t=(0,l.GetTextWidth)("Segoe UI",n+"em",e.label);g!==n&&y(n)}}),[e.label,e.height]);var P=i.useMemo((function(){return void 0===e.axis||"left"===e.axis?e.offsetLeft:e.width-e.offsetRight}),[e.offsetLeft,e.offsetRight,e.width,e.axis]),k=i.useMemo((function(){return void 0===e.axis||"left"===e.axis?-1:1}),[e.axis]);return i.createElement("g",null,i.createElement("path",{stroke:"currentColor",style:{strokeWidth:1,transition:"d 0.5s"},d:"M ".concat(P," ").concat(e.height-e.offsetBottom+8," V ").concat(e.offsetTop)}),i.createElement("path",{stroke:"currentColor",style:{strokeWidth:1,transition:"d 0.5s"},d:"M ".concat(P," ").concat(e.offsetTop," h ").concat(8*k)}),s.map((function(n,o){var a;return i.createElement("path",{key:o,stroke:void 0===e.axis||"left"===e.axis?"lightgrey":"darkgrey",strokeOpacity:null!==(a=e.showGrid)&&void 0!==a&&a?"0.8":"0.0",style:{strokeWidth:1,transition:"d 0.5s"},d:"M ".concat(e.offsetLeft," ").concat(t.YTransformation(n,r.AxisMap.get(e.axis))," h ").concat(e.width-e.offsetLeft-e.offsetRight)})})),s.map((function(n,o){return i.createElement("path",{key:o,stroke:"currentColor",style:{strokeWidth:1,transition:"d 1s"},d:"M ".concat(P," ").concat(t.YTransformation(n,r.AxisMap.get(e.axis))," h ").concat(6*k)})})),s.map((function(n,o){return i.createElement("text",{fill:"currentColor",key:o,style:{fontSize:"".concat(f,"em"),textAnchor:void 0===e.axis||"left"===e.axis?"end":"start",transition:"x 0.5s, y 0.5s"},dominantBaseline:"middle",x:P+8*k,y:t.YTransformation(n,r.AxisMap.get(e.axis))},(n*C).toFixed(E))})),void 0!==e.label?i.createElement("text",{fill:"currentColor",style:{fontSize:g+"em",textAnchor:"middle"},dominantBaseline:"text-bottom",transform:"rotate(".concat(90*k,",").concat(P+k*(M+4),",").concat((e.offsetTop-e.offsetBottom+e.height)/2,")"),x:P+k*(M+4),y:(e.offsetTop-e.offsetBottom+e.height)/2},e.label):null,1!==C?i.createElement("text",{fill:"currentColor",style:{fontSize:"1em"},x:P,y:e.offsetTop-5},"x",1/C):null)}))},28188:(e,t,n)=>{t.N1=t.Kl=void 0;var o=n(81377);t.Kl=o.default;var a=n(84512);t.N1=a.default,n(31594).default,n(28201).default,n(6460).default,n(64462).default,n(57060).default,n(84998).default,n(93107).default,n(18718).default,n(11505).default,n(71681).default;n(84917);n(30371).default;n(70894);n(86790).default,n(23954).default},28363:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var o=n(6904),a=n(2580),i=n(54840),r=n(94194);const l=e=>{const[t,n]=o.useState(!0);o.useEffect((()=>{var t;0===(null===(t=e.Voltages)||void 0===t?void 0:t.length)?n(!0):n(!1)}),[e.Voltages]);const l=o.useCallback(((t,n)=>new i.GrafanaQueryFunctions(`${e.HomePath}api/Grafana`).Search({dataTypeIndex:i.Grafana.DataTypeIndex.Phasor,expression:`SELECT MagnitudePointTag, AnglePointTag FROM PhasorValues WHERE (MagnitudePointTag LIKE '%${t}%' OR AnglePointTag LIKE '%${t}%') AND Type='${n?"I":"V"}'`}).then((e=>{const t=[];return e.forEach((e=>{const[n,o]=e.split(",");t.push({Label:n,Value:n}),t.push({Label:o,Value:o})})),t}))),[e.HomePath]),s=o.useCallback((t=>{const n=e.Currents.filter(((e,n)=>n!==t)),o=e.Voltages.filter(((e,n)=>n!==t));e.SetCurrents(n.length>0?n:[""]),e.SetVoltages(o.length>0?o:[""])}),[e.Currents,e.Voltages,e.SetCurrents,e.SetVoltages]),c=o.useCallback((()=>{e.SetCurrents([...e.Currents,""]),e.SetVoltages([...e.Voltages,""])}),[e.Currents,e.Voltages,e.SetCurrents,e.SetVoltages]),u=o.useCallback(((t,n,o)=>{if("current"===n){const n=[...e.Currents];n[t]=o,e.SetCurrents(n)}else{const n=[...e.Voltages];n[t]=o,e.SetVoltages(n)}}),[e.Currents,e.Voltages,e.SetCurrents,e.SetVoltages]),f=Math.max(e.Currents.length,e.Voltages.length,1);return o.createElement(o.Fragment,null,o.createElement("div",{className:"row"},o.createElement("div",{className:"col-12"},o.createElement(a.ToggleSwitch,{Record:{AutoMapVoltages:t},Field:"AutoMapVoltages",Setter:t=>{n(t.AutoMapVoltages),t.AutoMapVoltages&&e.SetVoltages([])},Label:"Auto Map Voltages",Help:"Flag to enable system to use Primary or Secondary Voltage associated of the Current Phasor."}))),Array.from({length:f}).map(((n,i)=>{var d,h;const m=null!==(d=e.Currents[i])&&void 0!==d?d:"",p=null!==(h=e.Voltages[i])&&void 0!==h?h:"",v=""!==m.trim()&&(t||""!==p.trim());return o.createElement("div",{className:"row align-items-center mb-2",key:i},o.createElement("div",{className:"col-5"},o.createElement(a.SearchableSelect,{Record:{Value:m},Field:"Value",Label:0===i?"Current":"",Search:e=>l(e,!0),Setter:e=>u(i,"current",e.Value),AllowCustom:!1,Style:{width:"100%"},BtnStyle:{display:"flex",paddingLeft:0,alignItems:"center"}})),o.createElement("div",{className:"col-5"},o.createElement(a.SearchableSelect,{Record:{Value:p},Field:"Value",Label:0===i?"Voltage":"",Search:e=>l(e,!1),Setter:e=>u(i,"voltage",e.Value),AllowCustom:!1,Disabled:t,Style:{width:"100%"},BtnStyle:{display:"flex",paddingLeft:0,alignItems:"center"}})),o.createElement("div",{className:"col-auto"},o.createElement("button",{className:"btn p-1",onClick:()=>s(i)},o.createElement(r.ReactIcons.TrashCan,{Color:"red"}))),i===f-1&&o.createElement("div",{className:"col-auto"},o.createElement("button",{className:"btn p-1",onClick:c,disabled:!v},o.createElement(r.ReactIcons.CirclePlus,null))))})))},s={SampleSize:{Value:15,Description:"Define the sample size, in seconds, of the data to be monitored."},EnergizedThreshold:{Value:48e3,Description:"Define the energized bus threshold, in volts. The recommended value is 20% of nominal line-to-neutral voltage."},LagTime:{Value:3,IsValid:e=>e>0,Description:"Defines the allowed past time deviation tolerance, in seconds (can be sub-second)."},LeadTime:{Value:1,IsValid:e=>e>0,Description:"Defines the allowed future time deviation tolerance, in seconds (can be sub-second)."},FramesPerSecond:{Value:30,IsValid:e=>e>0,Description:"Defines the number of frames per second expected by the adapter."},Currents:{Value:[],Description:"Defines the Current Magnitude to be used.",Parse:e=>null==e?[]:""===e?[""]:e.split(";"),Construct:e=>0===(null==e?void 0:e.length)?null:null==e?void 0:e.join(";")},Voltages:{Value:[],Description:"Defines the Voltage Magnitude to be used. If not supplied the system will use Primary or Secondary Voltage associated with the Current Phasor.",Parse:e=>null==e?[]:""===e?[""]:e.split(";"),Construct:e=>0===(null==e?void 0:e.length)?null:null==e?void 0:e.join(";")},Power:{Value:"",Description:"Defines the Output Measurement for Power Signal.",IsValid:e=>null!=e&&0!==e.trim().length},StDev:{Value:"",Description:"Defines the Output Measurement for StDev.",IsValid:e=>null!=e&&0!==e.trim().length}},c=["Power","StDev"],u={Power:"Power",StDev:"Standard Deviation"};var f=n(32098),d=n.n(f),h=n(55476),m=n(24334),p=n(28188);const v="MM/DD/YYYY HH:mm:ss.SSS",g={Currents:{Value:[],Description:"Defines the Current Magnitude to be used.",Parse:e=>null==e?[]:""===e?[""]:e.split(";"),Construct:e=>0===(null==e?void 0:e.length)?null:null==e?void 0:e.join(";")},Voltages:{Value:[],Description:"Defines the Voltage Magnitude to be used. If not supplied the system will use Primary or Secondary Voltage associated with the Current Phasor.",Parse:e=>null==e?[]:""===e?[""]:e.split(";"),Construct:e=>0===(null==e?void 0:e.length)?null:null==e?void 0:e.join(";")}},y=e=>[{refID:"A",target:`Filter PhasorValues Where ${e.map((e=>`(AnglePointTag = '${e}' OR MagnitudePointTag = '${e}')`)).join(" OR ")}`,metadataSelections:[]}],x={Settings:e=>{const t=o.useMemo((()=>i.AdapterHelperFuncs.parseConnectionString(e.ConnectionString,s)),[e.ConnectionString]);i.AdapterHelperFuncs.useSetInitialConnectionString(e.ConnectionString,e.SetConnectionString,s,t),i.AdapterHelperFuncs.useSetDefaultSettings(s,e.SetDefaultSettings);const[n,r]=o.useState(!0),f=o.useCallback((t=>{const n=i.AdapterHelperFuncs.constructConnectionString(t,s);e.SetConnectionString(n)}),[e.ConnectionString]),d=o.useCallback(((e,n)=>{const o=Object.assign(Object.assign({},t),{[n]:e});f(o)}),[t,f]),h=o.useCallback((e=>{f(Object.assign(Object.assign({},t),{Currents:e}))}),[t,f]),m=o.useCallback((e=>{f(Object.assign(Object.assign({},t),{Voltages:e}))}),[t,f]);return o.useEffect((()=>{if(null==t)return;const o=[];1===t.Voltages.length||n||o.push("At least 1 Voltage input is required."),1!==t.Currents.length&&o.push("At least 1 Current input is required."),s.Power.IsValid(t.Power)||o.push("Power Output Measurement can not be empty."),s.StDev.IsValid(t.StDev)||o.push("St Dev Output Measurement can not be empty."),s.LagTime.IsValid(t.LagTime)||o.push("Lag Time must be greater than 0."),s.LeadTime.IsValid(t.LeadTime)||o.push("Lead Time must be greater than 0."),s.FramesPerSecond.IsValid(t.FramesPerSecond)||o.push("Frames Per Second must be greater than 0."),e.SetErrors(o)}),[t,n]),null==t?o.createElement(o.Fragment,null):o.createElement("div",{className:"container-fluid d-flex flex-column h-100 p-0"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-12"},o.createElement("fieldset",{className:"border",style:{padding:"10px"}},o.createElement("legend",{className:"w-auto pr-2",style:{fontSize:"large"}},"Inputs"),o.createElement(l,{Voltages:t.Voltages,Currents:t.Currents,SetCurrents:h,SetVoltages:m,HomePath:e.HomePath})))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-12"},o.createElement("fieldset",{className:"border",style:{padding:"10px"}},o.createElement("legend",{className:"w-auto pr-2",style:{fontSize:"large"}},"Outputs"),c.map((n=>{const r=t[n];return o.createElement("div",{className:"row mb-2 align-items-center",key:n},o.createElement("div",{className:"col-12"},o.createElement(a.SearchableSelect,{Record:{Measurement:r},Field:"Measurement",Label:u[n],Setter:e=>d(e.Measurement,n),AllowCustom:!1,Search:t=>(0,i.handleMeasurementSearch)(t,`${e.HomePath}api/grafana`),Style:{width:"100%"},BtnStyle:{display:"flex",paddingLeft:0,alignItems:"center"}})))}))))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-6"},o.createElement(a.Input,{Record:t,Setter:f,Label:"Sample Size",Type:"number",Field:"SampleSize",Valid:()=>!0,Help:s.SampleSize.Description,AllowNull:!0})),o.createElement("div",{className:"col-6"},o.createElement(a.Input,{Record:t,Setter:f,Label:"Energized Threshold",Type:"number",Field:"EnergizedThreshold",Valid:()=>!0,Help:s.EnergizedThreshold.Description,AllowNull:!0}))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-12 col-xl-4"},o.createElement(a.Input,{Record:t,Setter:f,Label:"Frames Per Second",Type:"number",Field:"FramesPerSecond",Valid:e=>{var n,o,a;return null===(a=null===(o=null===(n=null==s?void 0:s.FramesPerSecond)||void 0===n?void 0:n.IsValid)||void 0===o?void 0:o.call(n,t[e]))||void 0===a||a},Feedback:"Frames Per Second must be greater than 0.",Help:s.FramesPerSecond.Description,AllowNull:!0})),o.createElement("div",{className:"col-12 col-xl-4"},o.createElement(a.Input,{Record:t,Setter:f,Label:"Lag Time",Type:"number",Field:"LagTime",Valid:e=>{var n,o,a;return null===(a=null===(o=null===(n=s.LagTime)||void 0===n?void 0:n.IsValid)||void 0===o?void 0:o.call(n,t[e]))||void 0===a||a},Feedback:"Lag Time must be greater than 0.",Help:s.LagTime.Description,AllowNull:!0})),o.createElement("div",{className:"col-12 col-xl-4"},o.createElement(a.Input,{Record:t,Setter:f,Label:"Lead Time",Type:"number",Field:"LeadTime",Valid:e=>{var n,o,a;return null===(a=null===(o=null===(n=s.LeadTime)||void 0===n?void 0:n.IsValid)||void 0===o?void 0:o.call(n,t[e]))||void 0===a||a},Feedback:"Lead Time must be greater than 0.",Help:s.LeadTime.Description,AllowNull:!0}))))},Input:e=>{const t=`${e.HomePath}api/grafana`,n=o.useRef(null),{width:a}=(0,m.useGetContainerPosition)(n),l=(0,i.useGetLegendWidth)(a),{Currents:s,Voltages:c}=o.useMemo((()=>i.AdapterHelperFuncs.parseConnectionString(e.ConnectionString,g)),[e.ConnectionString]),[u,f]=o.useState({start:d().utc().subtract(e.Settings.DefaultDuration,"seconds").format(v).toString(),end:d().utc().format(v).toString()}),x=o.useMemo((()=>y(null!=s?s:[])),[s]),M=o.useMemo((()=>y(null!=c?c:[])),[c]),{Data:S,Status:b}=(0,i.useGrafanaQuery)(x,d().utc(u.start).toISOString(),d().utc(u.end).toISOString(),t,i.Grafana.DataTypeIndex.Phasor),{Data:E,Status:T}=(0,i.useGrafanaQuery)(M,d().utc(u.start).toISOString(),d().utc(u.end).toISOString(),t,i.Grafana.DataTypeIndex.Phasor),[w,C]=o.useState(0);return o.useEffect((()=>{const e=[...E,...S],t=setInterval((()=>{C((t=>{if(0===e.length||0===e[0].datapoints.length)return t;const n=Math.min(...e.map((e=>e.datapoints.length)));return 0===n?0:(t+1)%n}))}),5e3);return()=>clearInterval(t)}),[E,S]),o.createElement(o.Fragment,null,o.createElement("div",{className:"container-fluid d-flex flex-column h-100 p-0"},o.createElement("div",{className:"row m-0 pb-3"},o.createElement("div",{className:"col-12 p-0"},o.createElement(h.TimeFilter,{filter:u,setFilter:(e,t)=>f({start:e,end:t}),showQuickSelect:!0,isHorizontal:!0,dateTimeSetting:e.Settings.DateTimeSetting,timeZone:"UTC",format:"datetime-local",accuracy:"millisecond",showHelpMessage:!1}))),"loading"===b||"loading"===T?o.createElement("div",{className:"row m-0"},o.createElement("div",{className:"col-12 p-0 d-flex flex-column align-items-center justify-content-center"},o.createElement(r.ReactIcons.SpiningIcon,{Size:200}))):o.createElement(o.Fragment,null,o.createElement("div",{className:"row m-0"},o.createElement("div",{className:"col-9 p-0",ref:n},o.createElement(p.Kl,{defaultTdomain:[d().utc(u.start,v).valueOf(),d().utc(u.end,v).valueOf()],height:200,width:a,Ylabel:"Voltage (Mag)",legend:"right",yDomain:"AutoValue",Tlabel:"Time",useMetricFactors:!1,legendWidth:l},E.map(((e,t)=>o.createElement(p.N1,{key:t,data:e.datapoints.map((e=>[e[2],e[0]])),color:(0,i.getColor)(t),lineStyle:"-",legend:e.target}))))),o.createElement("div",{className:"col-3 p-0 d-flex justify-content-center align-items-center"},o.createElement("svg",{width:"140",height:"140",viewBox:"0 0 140 140",style:{display:"block",marginTop:"8px"}},o.createElement("circle",{style:{fill:"none",stroke:"currentColor"},cx:70,cy:70,r:65}),o.createElement("circle",{style:{fill:"none",stroke:"currentColor"},cx:70,cy:70,r:35}),o.createElement("line",{style:{stroke:"currentColor"},x1:70,y1:0,x2:70,y2:140}),o.createElement("line",{style:{stroke:"currentColor"},x1:0,y1:70,x2:140,y2:70}),o.createElement("g",null,E.map(((e,t)=>0!==e.datapoints.length&&o.createElement("path",{key:t,style:{fill:(0,i.getColor)(t),stroke:(0,i.getColor)(t)},d:"M 70 70 L 70 0 L 65 10 L 75 10 L 70 0",transform:`rotate(${e.datapoints[0][1]} 70 70)`}))))))),o.createElement("div",{className:"row m-0"},o.createElement("div",{className:"col-9 p-0"},o.createElement(p.Kl,{defaultTdomain:[d().utc(u.start,v).valueOf(),d().utc(u.end,v).valueOf()],height:250,width:a,Ylabel:"Current (Mag)",legend:"right",yDomain:"AutoValue",Tlabel:"Time",useMetricFactors:!1,legendWidth:l},S.map(((e,t)=>o.createElement(p.N1,{key:t,data:e.datapoints.map((e=>[e[2],e[0]])),color:(0,i.getColor)(t),lineStyle:"-",legend:e.target}))))),o.createElement("div",{className:"col-3 p-0 d-flex justify-content-center align-items-center"},o.createElement("svg",{width:"140",height:"140",viewBox:"0 0 140 140",style:{display:"block",marginTop:"8px"}},o.createElement("circle",{style:{fill:"none",stroke:"currentColor"},cx:70,cy:70,r:65}),o.createElement("circle",{style:{fill:"none",stroke:"currentColor"},cx:70,cy:70,r:35}),o.createElement("line",{style:{stroke:"currentColor"},x1:70,y1:0,x2:70,y2:140}),o.createElement("line",{style:{stroke:"currentColor"},x1:0,y1:70,x2:140,y2:70}),o.createElement("g",null,S.map(((e,t)=>0!==e.datapoints.length&&o.createElement("path",{key:t,style:{fill:(0,i.getColor)(t),stroke:(0,i.getColor)(t)},d:"M 70 70 L 70 0 L 65 10 L 75 10 L 70 0",transform:`rotate(${e.datapoints[w][1]} 70 70)`}))))))))))},Output:e=>{const{Power:t,StDev:n}=i.AdapterHelperFuncs.parseConnectionString(e.ConnectionString),a=[t,n].filter((e=>null!=e&&""!==e)).join("; ");return o.createElement(i.DefaultAdapterOutput,Object.assign({},e,{Outputs:a}))}}}}]);