"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[378],{32378:(e,t,l)=>{l.r(t),l.d(t,{default:()=>s});var a=l(6904),n=l(2580),i=l(54840);const c={OutputDevice:{Value:"",Description:"Defines the output device."},InputDevices:{Description:"Defines the input devices.",Value:[""],Parse:e=>null==e||""===e?[""]:e.split(","),Construct:e=>0===(null==e?void 0:e.length)||1===e.length&&""===e[0]?null:null==e?void 0:e.join(",")},LagTime:{Value:3,IsValid:e=>e>0,Description:"Defines the allowed past time deviation tolerance, in seconds (can be sub-second)."},LeadTime:{Value:1,IsValid:e=>e>0,Description:"Defines the allowed future time deviation tolerance, in seconds (can be sub-second)."},FramesPerSecond:{Value:30,IsValid:e=>e>0,Description:"Defines the number of frames per second expected by the adapter."},UseLocalClockAsRealTime:{Value:!0,Description:"Defines flag that determines whether or not to use the local clock time as real time."},FallBackOnLocalClock:{Value:!1,Description:"Defines flag that determines whether to fall back on local clock time as real time when time is unreasonable. Only applicable when UseLocalClockAsRealTime is false."},AcceptableState:{Value:1,Description:"Defines the acceptables state of the input devices."}},r=(e,t)=>{const l=i.ControllerPaths.GetDeviceControllerPath(t);return new i.ReadOnlyControllerFunctions(l).SearchPage(0,"Name",!0,[{SearchParameter:`*${e}*`,FieldName:"Name",Operator:"LIKE"}]).then((e=>e.map((e=>({Label:e.Name+` (${e.Acronym})`,Value:e.Acronym})))))},o=(e,t)=>{var l;const a=`${t}api/Device`,n=new i.ReadOnlyControllerFunctions(a);if(null==e||0===(null===(l=null==e?void 0:e.trim())||void 0===l?void 0:l.length))return Promise.resolve(!1);const c=n.SearchPage(0,"Acronym",!0,[{SearchParameter:e,Operator:"=",FieldName:"Acronym"}]);return new Promise((e=>{c.done((t=>{null==t||1!==t.length?e(!1):e(!0)})).fail((()=>{e(!1)}))}))},s={Settings:e=>{const t=a.useMemo((()=>i.AdapterHelperFuncs.parseConnectionString(e.ConnectionString,c)),[e.ConnectionString]);i.AdapterHelperFuncs.useSetInitialConnectionString(e.ConnectionString,e.SetConnectionString,c,t),i.AdapterHelperFuncs.useSetDefaultSettings(c,e.SetDefaultSettings);const l=a.useCallback((t=>{const l=i.AdapterHelperFuncs.constructConnectionString(t,c);e.SetConnectionString(l)}),[e.ConnectionString]),s=a.useCallback((()=>{if(null==(null==t?void 0:t.AcceptableState))return Promise.resolve("");const l=i.ControllerPaths.GetDeviceStateControllerPath(e.HomePath);return new i.ReadOnlyControllerFunctions(l).GetOne(t.AcceptableState).then((e=>e.State))}),[null==t?void 0:t.AcceptableState,e.HomePath]);return a.useEffect((()=>{var l,a,n,r;null!=t&&(l=void 0,a=void 0,r=function*(){var l;const a=[];(yield o(t.OutputDevice,e.HomePath))||a.push("Output device is invalid.");for(const n in t.InputDevices)null!=n&&0!==(null===(l=null==n?void 0:n.trim())||void 0===l?void 0:l.length)&&((yield o(n,e.HomePath))||a.push(`Input device "${n}" is invalid.`));(yield((e,t)=>{const l=i.ControllerPaths.GetDeviceStateControllerPath(t),a=new i.ReadOnlyControllerFunctions(l);if(null==e||e<=0)return Promise.resolve(!1);const n=a.GetOne(e);return new Promise((e=>{n.done((t=>{null==t||t.ID<=0?e(!1):e(!0)})).fail((()=>{e(!1)}))}))})(t.AcceptableState,e.HomePath))||a.push("Acceptable state is invalid."),c.LagTime.IsValid(t.LagTime)||a.push("Lag Time must be greater than 0."),c.LeadTime.IsValid(t.LeadTime)||a.push("Lead Time must be greater than 0."),c.FramesPerSecond.IsValid(t.FramesPerSecond)||a.push("Frames Per Second must be greater than 0."),e.SetErrors(a)},new((n=void 0)||(n=Promise))((function(e,t){function i(e){try{o(r.next(e))}catch(e){t(e)}}function c(e){try{o(r.throw(e))}catch(e){t(e)}}function o(t){var l;t.done?e(t.value):(l=t.value,l instanceof n?l:new n((function(e){e(l)}))).then(i,c)}o((r=r.apply(l,a||[])).next())})))}),[t]),null==t?a.createElement(a.Fragment,null):a.createElement("div",{className:"container-fluid d-flex flex-column h-100 p-0"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-12"},a.createElement(n.MultiSearchableSelect,{Record:t,Field:"InputDevices",Label:"Input Devices",Setter:l,AllowCustom:!1,Search:t=>r(t,e.HomePath),Style:{width:"100%"},BtnStyle:{display:"flex",paddingLeft:0,alignItems:"center"},DefaultValue:"",Help:c.InputDevices.Description}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-12"},a.createElement(n.SearchableSelect,{Record:t,Field:"OutputDevice",Label:"Output Device",Setter:l,AllowCustom:!1,Search:t=>r(t,e.HomePath),Style:{width:"100%"},BtnStyle:{display:"flex",paddingLeft:0,alignItems:"center"},Help:c.OutputDevice.Description}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-12"},a.createElement(n.SearchableSelect,{Record:t,Field:"AcceptableState",Label:"AcceptableState",Setter:l,AllowCustom:!1,Search:t=>((e,t)=>{const l=i.ControllerPaths.GetDeviceStateControllerPath(t);return new i.ReadOnlyControllerFunctions(l).SearchPage(0,"State",!0,[{SearchParameter:`*${e}*`,FieldName:"State",Operator:"LIKE"}]).then((e=>e.map((e=>({Label:e.State,Value:e.ID})))))})(t,e.HomePath),Style:{width:"100%"},BtnStyle:{display:"flex",paddingLeft:0,alignItems:"center"},GetLabel:s,Help:c.AcceptableState.Description}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-12 col-xl-4"},a.createElement(n.Input,{Record:t,Setter:l,Label:"Frames Per Second",Type:"number",Field:"FramesPerSecond",Valid:e=>{var l,a,n;return null===(n=null===(a=null===(l=null==c?void 0:c.FramesPerSecond)||void 0===l?void 0:l.IsValid)||void 0===a?void 0:a.call(l,t[e]))||void 0===n||n},Feedback:"Frames Per Second must be greater than 0.",Help:c.FramesPerSecond.Description,AllowNull:!0})),a.createElement("div",{className:"col-12 col-xl-4"},a.createElement(n.Input,{Record:t,Setter:l,Label:"Lag Time",Type:"number",Field:"LagTime",Valid:e=>{var l,a,n;return null===(n=null===(a=null===(l=c.LagTime)||void 0===l?void 0:l.IsValid)||void 0===a?void 0:a.call(l,t[e]))||void 0===n||n},Feedback:"Lag Time must be greater than 0.",Help:c.LagTime.Description,AllowNull:!0})),a.createElement("div",{className:"col-12 col-xl-4"},a.createElement(n.Input,{Record:t,Setter:l,Label:"Lead Time",Type:"number",Field:"LeadTime",Valid:e=>{var l,a,n;return null===(n=null===(a=null===(l=c.LeadTime)||void 0===l?void 0:l.IsValid)||void 0===a?void 0:a.call(l,t[e]))||void 0===n||n},Feedback:"Lead Time must be greater than 0.",Help:c.LeadTime.Description,AllowNull:!0}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-12"},a.createElement(n.ToggleSwitch,{Record:t,Field:"UseLocalClockAsRealTime",Label:"Use Local Clock As Real Time",Help:c.UseLocalClockAsRealTime.Description,Setter:l}))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-12"},a.createElement(n.ToggleSwitch,{Record:t,Field:"FallBackOnLocalClock",Label:"Fall Back On Local Clock",Help:c.FallBackOnLocalClock.Description,Setter:l}))))))},Input:e=>{const{InputDevices:t}=i.AdapterHelperFuncs.parseConnectionString(e.ConnectionString,c),l=t.map((e=>`Device = '${e.trim()}'`)).join(" OR ");return a.createElement(i.DefaultAdapterInput,Object.assign({},e,{Inputs:`Filter ActiveMeasurements Where ${l}`}))},Output:e=>{const{OutputDevice:t}=i.AdapterHelperFuncs.parseConnectionString(e.ConnectionString);return a.createElement(i.DefaultAdapterOutput,Object.assign({},e,{Outputs:`Filter ActiveMeasurements Where Device = '${t}'`}))}}}}]);