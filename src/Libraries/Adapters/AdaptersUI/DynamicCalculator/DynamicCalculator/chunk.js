"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[510],{62510:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var l,i,n=a(6904),s=a(2580),r=a(54840);!function(e){e[e.Frame=0]="Frame",e[e.RealTime=1]="RealTime",e[e.LocalClock=2]="LocalClock"}(l||(l={})),function(e){e[e.PublishValueAsNan=0]="PublishValueAsNan",e[e.PublishWithBadState=1]="PublishWithBadState"}(i||(i={}));const o={ExpressionText:{Description:"Defines the arithmetic expression used to perform calculations.",Value:null},VariableList:{Description:'Defines the unique list of variables used in the expression. Note that "TIME" is reserved, this returns the current timestamp for the calculation in ticks.',Value:[""],Parse:e=>null==e||""===e?[""]:e.split(";"),Construct:e=>0===(null==e?void 0:e.length)||1===e.length&&""===e[0]?null:null==e?void 0:e.join(";")},Imports:{Description:"Defines the list of types which define methods to be imported into the expression parser.",Value:["AssemblyName=mscorlib, TypeName=System.Math","AssemblyName=mscorlib, TypeName=System.DateTime"," AssemblyName=DynamicCalculator, TypeName=DynamicCalculator.AggregateFunctions"],Parse:e=>null==e||""===e?[""]:e.split(";"),Construct:e=>0===(null==e?void 0:e.length)||1===e.length&&""===e[0]?"":null==e?void 0:e.join(";")},SentinelValue:{Description:"Defines the value used when no other value can be determined for a variable.",Value:"NaN"},CalculationInterval:{Description:"Defines the interval, in seconds, at which the adapter should calculate values. Zero value executes calculations at received data rate.",Value:0},TimestampSource:{Description:"Defines the source of the timestamps of the calculated values.",Value:l.Frame},OutlierOperation:{Description:"Defines the source of the timestamps of the calculated values.",Value:i.PublishValueAsNan},SupportsTemporalProcessing:{Description:"Defines the flag indicating if this adapter supports temporal processing.",Value:!1},UseLatestValue:{Description:"Defines the flag indicating if this adapter should use latest values for missing measurements.",Value:!0},SkipNaNOutput:{Description:"Defines the flag indicating whether to skip processing of an output with a value of NaN.",Value:!1},InputMeasurementKeys:{Description:"Defines primary keys of input measurements the action adapter expects; can be one of a filter expression, measurement key, point tag or Guid.",Value:[],Parse:e=>null==e?[]:""===e?[""]:e.split(";"),Construct:e=>0===(null==e?void 0:e.length)?null:null==e?void 0:e.join(";")},OutputMeasurements:{Description:"Defines primary keys of output measurements the action adapter expects; can be one of a filter expression, measurement key, point tag or Guid.",Value:""},LagTime:{Value:3,IsValid:e=>e>0,Description:"Defines the allowed past time deviation tolerance, in seconds (can be sub-second)."},LeadTime:{Value:1,IsValid:e=>e>0,Description:"Defines the allowed future time deviation tolerance, in seconds (can be sub-second)."},FramesPerSecond:{Value:30,Description:"Defines the number of frames per second expected by the adapter.",IsValid:e=>e>0}},u=[{Label:"Publish Value As Nan",Value:i.PublishValueAsNan},{Label:"Publish With Bad State",Value:i.PublishWithBadState}],c=[{Label:"Frame",Value:l.Frame},{Label:"Real Time",Value:l.RealTime},{Label:"Local Clock",Value:l.LocalClock}],m={Settings:e=>{var t;const a=n.useMemo((()=>r.AdapterHelperFuncs.parseConnectionString(e.ConnectionString,o)),[e.ConnectionString]);r.AdapterHelperFuncs.useSetInitialConnectionString(e.ConnectionString,e.SetConnectionString,o,a),r.AdapterHelperFuncs.useSetDefaultSettings(o,e.SetDefaultSettings);const l=n.useCallback((t=>{const a=r.AdapterHelperFuncs.constructConnectionString(t,o);a!==e.ConnectionString&&e.SetConnectionString(a)}),[e.ConnectionString]);return n.useEffect((()=>{var t;if(null==a)return void e.SetErrors([]);const l=[];null!=a.InputMeasurementKeys&&0!==(null===(t=a.InputMeasurementKeys)||void 0===t?void 0:t.length)||l.push("Input Measurements are required."),null!=a.OutputMeasurements&&""!==a.OutputMeasurements||l.push("Output Measurement is required."),null!=a.ExpressionText&&""!==a.ExpressionText.trim()||l.push("Expression Text is required."),(null==a.VariableList||0===a.VariableList.length||1===a.VariableList.length&&""===a.VariableList[0])&&l.push("Variable List is required"),(null==a.LagTime||a.LagTime<=0)&&l.push("Lag Time must be greater than 0."),(null==a.LeadTime||a.LeadTime<=0)&&l.push("Lead Time must be greater than 0."),(null==a.FramesPerSecond||a.FramesPerSecond<=0)&&l.push("Frames Per Second must be greater than 0."),e.SetErrors(l)}),[a]),n.createElement(n.Fragment,null,null!=a?n.createElement("div",{className:"container-fluid d-flex flex-column h-100 p-0"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-12"},n.createElement(r.MeasurementSelector,{Measurements:null!==(t=null==a?void 0:a.InputMeasurementKeys)&&void 0!==t?t:[],SetMeasurements:e=>l(Object.assign(Object.assign({},a),{InputMeasurementKeys:e})),HomePath:e.HomePath,DataTypeIndex:r.Grafana.DataTypeIndex.Measurement,Title:"Input Measurements"}))),n.createElement("div",{className:"row"},n.createElement("div",{className:"col-12"},n.createElement(s.SearchableSelect,{Record:a,Field:"OutputMeasurements",Label:"Output Measurement",Setter:l,Search:t=>(0,r.handleMeasurementSearch)(t,`${e.HomePath}api/grafana`),AllowCustom:!1,Style:{width:"100%"},BtnStyle:{display:"flex",paddingLeft:0,alignItems:"center"}}))),n.createElement("div",{className:"row"},n.createElement("div",{className:"col-12"},n.createElement(s.TextArea,{Record:a,Field:"ExpressionText",Label:"Expression Text",Valid:()=>!0,Setter:l,Help:o.ExpressionText.Description,Rows:3}))),n.createElement("div",{className:"row"},n.createElement("div",{className:"col-12"},n.createElement(s.MultiInput,{Record:a,Setter:l,DefaultValue:"",Field:"VariableList",Label:"Variable List",Valid:()=>!0,Help:o.VariableList.Description}))),n.createElement("div",{className:"row"},n.createElement("div",{className:"col-12"},n.createElement(s.MultiInput,{Record:a,Setter:l,DefaultValue:"",Field:"Imports",Label:"Imports",Valid:()=>!0,Help:o.Imports.Description}))),n.createElement("div",{className:"row"},n.createElement("div",{className:"col-12"},n.createElement(s.Input,{Record:a,Type:"text",AllowNull:!1,Field:"SentinelValue",Label:"Sentinel Value",Valid:e=>!0,Setter:l,Help:o.SentinelValue.Description}))),n.createElement("div",{className:"row"},n.createElement("div",{className:"col-12"},n.createElement(s.Input,{Record:a,Type:"number",AllowNull:!1,Field:"CalculationInterval",Label:"Calculation Interval",Valid:e=>!0,Setter:l,Help:o.CalculationInterval.Description}))),n.createElement("div",{className:"row"},n.createElement("div",{className:"col-12"},n.createElement(s.Select,{Record:a,Field:"TimestampSource",Label:"Timestamp Source",Setter:l,Help:o.TimestampSource.Description,Options:c}))),n.createElement("div",{className:"row"},n.createElement("div",{className:"col-12 col-xl-4"},n.createElement(s.Input,{Record:a,Setter:l,Label:"Frames Per Second",Type:"number",Field:"FramesPerSecond",Valid:e=>{var t,l,i;return null===(i=null===(l=null===(t=null==o?void 0:o.FramesPerSecond)||void 0===t?void 0:t.IsValid)||void 0===l?void 0:l.call(t,a[e]))||void 0===i||i},Feedback:"Frames Per Second must be greater than 0.",AllowNull:!0})),n.createElement("div",{className:"col-12 col-xl-4"},n.createElement(s.Input,{Record:a,Setter:l,Label:"Lag Time",Type:"number",Field:"LagTime",Valid:e=>{var t,l,i;return null===(i=null===(l=null===(t=o.LagTime)||void 0===t?void 0:t.IsValid)||void 0===l?void 0:l.call(t,a[e]))||void 0===i||i},Feedback:"Lag Time must be greater than 0.",AllowNull:!0})),n.createElement("div",{className:"col-12 col-xl-4"},n.createElement(s.Input,{Record:a,Setter:l,Label:"Lead Time",Type:"number",Field:"LeadTime",Valid:e=>{var t,l,i;return null===(i=null===(l=null===(t=o.LeadTime)||void 0===t?void 0:t.IsValid)||void 0===l?void 0:l.call(t,a[e]))||void 0===i||i},Feedback:"Lead Time must be greater than 0.",AllowNull:!0}))),a.UseLatestValue?n.createElement("div",{className:"row"},n.createElement("div",{className:"col-12"},n.createElement(s.Select,{Record:a,Field:"OutlierOperation",Label:"Outlier Operation",Setter:l,Help:o.OutlierOperation.Description,Options:u}))):null,n.createElement("div",{className:"row"},n.createElement("div",{className:"col-12"},n.createElement(s.ToggleSwitch,{Record:a,Field:"SkipNaNOutput",Label:"Skip NaN Output",Setter:l,Help:o.SkipNaNOutput.Description}))),n.createElement("div",{className:"row"},n.createElement("div",{className:"col-12"},n.createElement(s.ToggleSwitch,{Record:a,Field:"SupportsTemporalProcessing",Label:"Supports Temporal Processing",Setter:l,Help:o.SupportsTemporalProcessing.Description}))),n.createElement("div",{className:"row"},n.createElement("div",{className:"col-12"},n.createElement(s.ToggleSwitch,{Record:a,Field:"UseLatestValue",Label:"Use Latest Value",Setter:l,Help:o.UseLatestValue.Description})))):null)},Input:null,Output:null}}}]);